{"version":3,"sources":["gl-code/grammar.js","theme.js","components/ControlBar/ControlBar.js","gl-code/complex-functions.js","gl-code/translators/to-js.js","gl-code/translators/index.js","gl-code/shaders.js","gl-code/scene.js","components/util.js","components/FunctionPlot/CoordinateOverlay.js","components/FunctionPlot/index.js","components/SidePanel/SidePanel.js","gl-code/parse-expression.js","gl-code/function-list.js","components/SliderPanel/VariableAdder.js","components/SliderPanel/editable-value/parsers.js","components/SliderPanel/editable-value/EditableValue.js","components/SliderPanel/slider/Slider.js","components/SliderPanel/SliderPanel.js","components/OptionsPanel/OptionsPanel.js","components/IntegralCalculator/ResultTooltip.js","components/IntegralCalculator/strategies/Strategy.js","components/IntegralCalculator/strategies/util.js","components/IntegralCalculator/strategies/Freeform.js","components/IntegralCalculator/index.js","components/IntegralCalculator/strategies/FreeformClosed.js","components/IntegralCalculator/strategies/Circle.js","components/IntegralCalculator/IntegralPanel.js","components/FunctionEditor/FunctionEditor.js","components/HelpText/HelpText.js","App.js","registerServiceWorker.js","index.js"],"names":["id","x","grammar","Lexer","undefined","ParserRules","name","symbols","postprocess","d","concat","parseInt","join","literal","parseFloat","data","token","includes","ParserStart","module","exports","window","theme","createMuiTheme","palette","primary","blue","ControlPanel","event","this","props","onChange","target","value","_this","react_default","a","createElement","AppBar_default","Toolbar_default","disableGutters","IconButton_default","onClick","onMenuButton","Menu_default","TextField_default","placeholder","handleTextChange","error","autoFocus","fullWidth","Button_default","onHelpButton","React","PureComponent","compiledGrammar","nearley","Grammar","fromCompiled","argument_names","ComplexFunction","body","num_args","Object","classCallCheck","_len","arguments","length","parameters","Array","_key","types","fill","i","push","mul_i","reciprocal","cconj","cabs","carg","creal","cimag","ccis","cexp","clog","csqrt","csquare","csin","ccos","ctan","csec","ccsc","ccot","carcsin_bottom","carcsin_top","carcsin","carccos","carctan","carccot","carcsec","carccsc","csinh","ccosh","ctanh","csech","ccsch","ccoth","carsinh","carcosh","cartanh","carsech","carcsch","carcoth","cneg","cadd","csub","cmul","cdiv","cpow","cgamma","cgamma_left","cgamma_right","cfact","ceta","complex_functions","ceta_left","ceta_right","square","real","re","imag","im","conj","abs","arg","cis","exp","log","ln","sqrt","^","sin","cos","tan","sec","csc","cot","arcsin","arccos","arctan","arcsec","arccsc","arccot","sinh","cosh","tanh","sech","csch","coth","arsinh","arcosh","artanh","arsech","arcsch","arcoth","$","+","-","*","/","!","gamma","eta","zeta","parseExpression","expression","parser","Parser","feed","results","console","declarations","Set","values","map","f","declaration","definitions","code","declarationString","from","definitionString","functionDefinitions","math","require","I","complex","fns","sub","subtract","neg","unaryMinus","mul","multiply","div","divide","asin","acos","atan","asec","acsc","acot","asinh","acosh","atanh","asech","acsch","acoth","z","toJS","ast","variables","errorValue","NaN","constants","e","Math","E","pi","PI","tau","phi","_ast","toArray","operator","args","slice","slicedToArray","get","func","isNil","destructure","apply","toConsumableArray","subtree","toGLSL","infixOperators","add","_args","toUpperCase","factorial","loadShader","gl","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createShaderProgram","customShader","variableNames","fragmentShaderSource","width","height","x_offset","toFixed","y_offset","dpr","devicePixelRatio","variableDeclarations","custom_code","glsl_expression","getFragmentShaderSource","drawingBufferWidth","drawingBufferHeight","vertexShader","VERTEX_SHADER","vertexShaderSource","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","initializeScene","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","initBuffers","useProgram","positionLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","variableLocations","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","getUniformLocation","err","return","formatComplex","y","formatReal","forceSign","magnitude","exponent","floor","log10","pow","CoordinateOverlay","possibleConstructorReturn","getPrototypeOf","call","state","faded","fadeTimer","lastX","lastY","_this$props","changed","componentDidUpdate","_this2","hasChanged","clearTimeout","setTimeout","setState","_this$props2","_mapping","mapping","_mapping2","u","v","className","style_default","dynamic","react_katex","isFinite","canvasSize","pixelToPlot","scale","log_scale","offset_x","center_x","offset_y","center_y","FunctionPlot","position","mouseDown","initialized","lastUpdate","addEventListener","compilePlot","bind","initializeWebGL","onError","initializePlot","updatePlot","_this$state","lastPosition","lastMouseDown","mouseEvent","nativeEvent","targetTouches","touches","pageX","pageY","_ref","x0","y0","_ref2","x1","y1","hypot","getPosition","wheelEvent","deltaLogScale","every","_position","_pixelToPlot","_pixelToPlot2","mouse_plotx","mouse_ploty","deltaY","_pixelToPlot3","_pixelToPlot4","x_shift","y_shift","updatePosition","_this$getPosition","_this$getPosition2","logDistance","deltaPosition","handleZoom","handleMouseDown","handleMouseMove","handleMouseUp","_i","_Object$entries","entries","_ref6","_ref4","canvas","refs","getContext","offsetWidth","offsetHeight","viewport","custom_function","keys","variableAssignments","_i2","_Object$entries2","_ref10","_ref8","now","Date","_Object$values","location","uniform2f","drawArrays","TRIANGLES","drawScene","_this$state2","_pixelToPlot5","_pixelToPlot6","ref","onMouseDown","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onTouchStart","handleTouchStart","onTouchMove","handleTouchMove","onTouchEnd","handleTouchEnd","onWheel","FunctionPlot_CoordinateOverlay","SidePanel","classes","updateWidth","innerWidth","transitionWidth","Drawer_default","anchor","open","variant","paper","toolbar","children","SwipeableDrawer_default","onOpen","onToggle","onClose","disableDiscovery","disableSwipeToOpen","withStyles","mixins","functions","restrictedFunctions","functionList","blacklist","VariableAdder","errorMessage","keyCode","handleClick","toLowerCase","match","has","setValue","ListItem_default","onKeyDown","handleKeyPress","helperText","parsers","number","text","parsed","Number","isNaN","lower","EditableValue","focused","element","createRef","DEFAULT_PARSERS","getParser","parsedValue","toString","document","key","current","blur","reset","valid","classString","setAttribute","displayText","disabled","react_contenteditable_default","html","onFocus","handleFocus","handleChange","onBlur","handleBlur","tagName","innerRef","Slider","min","max","clampValue","ensureConsistency","SliderPanel_editable_value_EditableValue","onNameChange","setMin","Slider_default","setMax","onDelete","Delete_default","hiddenVariables","SliderPanel","sliders","textField","onUpdate","forceUpdate","sliderList","_loop","SliderPanel_slider_Slider","onRemove","_this3","List_default","ListSubheader_default","disableSticky","renderSliderList","SliderPanel_VariableAdder","onAdd","Component","BooleanOption","checked","label","button","Checkbox_default","ListItemText_default","OptionsPanel","options","variable","OptionsPanel_BooleanOption","heading","renderOptions","PREFIX","ResultTooltip","style","contents","Strategy","initialize","strokeStyle","lineWidth","clientX","clientY","integrate","draw","GAUSS_COEFFICIENTS","integrateReal","start","end","dx","result","_GAUSS_COEFFICIENTS","weight","abscissa","_submap","_submap2","FreeformIntegrator","accumulator","lastPoint","lastPagePoint","df","_start","_end","dy","_integrateReal","t","_integrateReal2","integrateSegment","_this$lastPagePoint","beginPath","moveTo","lineTo","stroke","STRATEGY_DICT","freeform","FreeformStrategy","freeform-closed","startPoint","startPagePoint","FreeformClosed","prototype","_this$startPoint","_this$startPagePoint","update","Freeform","circle","center","radius","pageCenter","pageRadius","_this$canvas","clearRect","arc","_this$center","integrand","theta","_this2$mapping","_this2$mapping2","_gammaPrime","gammaPrime","_gammaPrime2","up","vp","scaleFactor","IntegralCalculator","mousePosition","strategy","integrator","resizeCanvas","context","finish","resetState","tooltip","_strategy$value","_strategy$value2","snap","top","left","zIndex","calculators","icon","Brush_default","SettingsBackupRestore_default","PanoramaFishEye_default","IntegralPanel","entry","hidePanels","openCalculator","ListItemIcon_default","paddingLeft","renderIntegrator","FunctionEditor","Typography_default","multiline","defaultValue","supportedFunctions","HelpText","Chip_default","chip","sections","_supportedFunctions","section","renderChips","src","alt","href","renderSupportedFunctions","fontSize","buttonStyle","ExpansionPanel_default","margin","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","objectSpread","typography","defaultShader","App","expressionText","expressionError","shaderError","menuOpen","helpOpen","integrationStrategy","enable_checkerboard","invert_gradient","continuous_gradient","enable_supersampling","handleHashChange","preventDefault","passive","plot","handleVariableUpdate","message","hash","setExpression","decodeURIComponent","history","replaceState","encodeURIComponent","components_FunctionEditor_FunctionEditor","setCustomShader","_this$state3","MuiThemeProvider_default","ControlBar","handleMenuButton","handleHelpButton","components_SidePanel_SidePanel","components_SliderPanel_SliderPanel","handleVariableAdd","handleVariableRemove","IntegralCalculator_IntegralPanel","components_OptionsPanel_OptionsPanel","handleOptionToggle","renderFunctionEditor","components_IntegralCalculator","components_FunctionPlot","setErrorMessage","components_HelpText_HelpText","Boolean","hostname","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9aea06c5.chunk.js","sourcesContent":["// Generated automatically by nearley, version 2.19.0\n// http://github.com/Hardmath123/nearley\n(function () {\nfunction id(x) { return x[0]; }\nvar grammar = {\n    Lexer: undefined,\n    ParserRules: [\n    {\"name\": \"_$ebnf$1\", \"symbols\": []},\n    {\"name\": \"_$ebnf$1\", \"symbols\": [\"_$ebnf$1\", \"wschar\"], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"_\", \"symbols\": [\"_$ebnf$1\"], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"__$ebnf$1\", \"symbols\": [\"wschar\"]},\n    {\"name\": \"__$ebnf$1\", \"symbols\": [\"__$ebnf$1\", \"wschar\"], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"__\", \"symbols\": [\"__$ebnf$1\"], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"wschar\", \"symbols\": [/[ \\t\\n\\v\\f]/], \"postprocess\": id},\n    {\"name\": \"unsigned_int$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"unsigned_int$ebnf$1\", \"symbols\": [\"unsigned_int$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"unsigned_int\", \"symbols\": [\"unsigned_int$ebnf$1\"], \"postprocess\": \n        function(d) {\n            return parseInt(d[0].join(\"\"));\n        }\n        },\n    {\"name\": \"int$ebnf$1$subexpression$1\", \"symbols\": [{\"literal\":\"-\"}]},\n    {\"name\": \"int$ebnf$1$subexpression$1\", \"symbols\": [{\"literal\":\"+\"}]},\n    {\"name\": \"int$ebnf$1\", \"symbols\": [\"int$ebnf$1$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"int$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"int$ebnf$2\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"int$ebnf$2\", \"symbols\": [\"int$ebnf$2\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"int\", \"symbols\": [\"int$ebnf$1\", \"int$ebnf$2\"], \"postprocess\": \n        function(d) {\n            if (d[0]) {\n                return parseInt(d[0][0]+d[1].join(\"\"));\n            } else {\n                return parseInt(d[1].join(\"\"));\n            }\n        }\n        },\n    {\"name\": \"unsigned_decimal$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"unsigned_decimal$ebnf$1\", \"symbols\": [\"unsigned_decimal$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [\"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"unsigned_decimal$ebnf$2$subexpression$1\", \"symbols\": [{\"literal\":\".\"}, \"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1\"]},\n    {\"name\": \"unsigned_decimal$ebnf$2\", \"symbols\": [\"unsigned_decimal$ebnf$2$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"unsigned_decimal$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"unsigned_decimal\", \"symbols\": [\"unsigned_decimal$ebnf$1\", \"unsigned_decimal$ebnf$2\"], \"postprocess\": \n        function(d) {\n            return parseFloat(\n                d[0].join(\"\") +\n                (d[1] ? \".\"+d[1][1].join(\"\") : \"\")\n            );\n        }\n        },\n    {\"name\": \"decimal$ebnf$1\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": id},\n    {\"name\": \"decimal$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"decimal$ebnf$2\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"decimal$ebnf$2\", \"symbols\": [\"decimal$ebnf$2\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"decimal$ebnf$3$subexpression$1$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"decimal$ebnf$3$subexpression$1$ebnf$1\", \"symbols\": [\"decimal$ebnf$3$subexpression$1$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"decimal$ebnf$3$subexpression$1\", \"symbols\": [{\"literal\":\".\"}, \"decimal$ebnf$3$subexpression$1$ebnf$1\"]},\n    {\"name\": \"decimal$ebnf$3\", \"symbols\": [\"decimal$ebnf$3$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"decimal$ebnf$3\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"decimal\", \"symbols\": [\"decimal$ebnf$1\", \"decimal$ebnf$2\", \"decimal$ebnf$3\"], \"postprocess\": \n        function(d) {\n            return parseFloat(\n                (d[0] || \"\") +\n                d[1].join(\"\") +\n                (d[2] ? \".\"+d[2][1].join(\"\") : \"\")\n            );\n        }\n        },\n    {\"name\": \"percentage\", \"symbols\": [\"decimal\", {\"literal\":\"%\"}], \"postprocess\": \n        function(d) {\n            return d[0]/100;\n        }\n        },\n    {\"name\": \"jsonfloat$ebnf$1\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": id},\n    {\"name\": \"jsonfloat$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"jsonfloat$ebnf$2\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"jsonfloat$ebnf$2\", \"symbols\": [\"jsonfloat$ebnf$2\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"jsonfloat$ebnf$3$subexpression$1$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"jsonfloat$ebnf$3$subexpression$1$ebnf$1\", \"symbols\": [\"jsonfloat$ebnf$3$subexpression$1$ebnf$1\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"jsonfloat$ebnf$3$subexpression$1\", \"symbols\": [{\"literal\":\".\"}, \"jsonfloat$ebnf$3$subexpression$1$ebnf$1\"]},\n    {\"name\": \"jsonfloat$ebnf$3\", \"symbols\": [\"jsonfloat$ebnf$3$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"jsonfloat$ebnf$3\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"jsonfloat$ebnf$4$subexpression$1$ebnf$1\", \"symbols\": [/[+-]/], \"postprocess\": id},\n    {\"name\": \"jsonfloat$ebnf$4$subexpression$1$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"jsonfloat$ebnf$4$subexpression$1$ebnf$2\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"jsonfloat$ebnf$4$subexpression$1$ebnf$2\", \"symbols\": [\"jsonfloat$ebnf$4$subexpression$1$ebnf$2\", /[0-9]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"jsonfloat$ebnf$4$subexpression$1\", \"symbols\": [/[eE]/, \"jsonfloat$ebnf$4$subexpression$1$ebnf$1\", \"jsonfloat$ebnf$4$subexpression$1$ebnf$2\"]},\n    {\"name\": \"jsonfloat$ebnf$4\", \"symbols\": [\"jsonfloat$ebnf$4$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"jsonfloat$ebnf$4\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"jsonfloat\", \"symbols\": [\"jsonfloat$ebnf$1\", \"jsonfloat$ebnf$2\", \"jsonfloat$ebnf$3\", \"jsonfloat$ebnf$4\"], \"postprocess\": \n        function(d) {\n            return parseFloat(\n                (d[0] || \"\") +\n                d[1].join(\"\") +\n                (d[2] ? \".\"+d[2][1].join(\"\") : \"\") +\n                (d[3] ? \"e\" + (d[3][1] || \"+\") + d[3][2].join(\"\") : \"\")\n            );\n        }\n        },\n    {\"name\": \"sum\", \"symbols\": [\"sum\", \"_\", \"sumOperator\", \"_\", \"product\"], \"postprocess\": \n        (data) => [data[2], data[0], data[4]]\n            },\n    {\"name\": \"sum\", \"symbols\": [\"product\"], \"postprocess\": id},\n    {\"name\": \"product\", \"symbols\": [\"product\", \"_\", \"productOperator\", \"_\", \"power\"], \"postprocess\": \n        (data) => [data[2], data[0], data[4]]\n            },\n    {\"name\": \"product\", \"symbols\": [\"power\"], \"postprocess\": id},\n    {\"name\": \"power\", \"symbols\": [\"parenthesis\", \"_\", \"powerOperator\", \"_\", \"power\"], \"postprocess\": \n        (data) => ['pow', data[0], data[4]]\n            },\n    {\"name\": \"power\", \"symbols\": [\"parenthesis\"], \"postprocess\": id},\n    {\"name\": \"parenthesis\", \"symbols\": [{\"literal\":\"(\"}, \"_\", \"sum\", \"_\", {\"literal\":\")\"}], \"postprocess\": (data) => data[2]},\n    {\"name\": \"parenthesis\", \"symbols\": [{\"literal\":\"[\"}, \"_\", \"sum\", \"_\", {\"literal\":\"]\"}], \"postprocess\": (data) => data[2]},\n    {\"name\": \"parenthesis\", \"symbols\": [\"function\"], \"postprocess\": id},\n    {\"name\": \"function\", \"symbols\": [\"literal\"], \"postprocess\": id},\n    {\"name\": \"function\", \"symbols\": [\"literal\", \"_\", {\"literal\":\"!\"}], \"postprocess\": (data) => ['factorial', data[0]]},\n    {\"name\": \"function\", \"symbols\": [\"unaryFunction\", \"_\", \"parenthesis\"], \"postprocess\": \n        (data) => [data[0], data[2]]\n            },\n    {\"name\": \"sumOperator\", \"symbols\": [{\"literal\":\"+\"}], \"postprocess\": () => 'add'},\n    {\"name\": \"sumOperator\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": () => 'sub'},\n    {\"name\": \"productOperator\", \"symbols\": [{\"literal\":\"*\"}], \"postprocess\": () => 'mul'},\n    {\"name\": \"productOperator\", \"symbols\": [{\"literal\":\"/\"}], \"postprocess\": () => 'div'},\n    {\"name\": \"powerOperator$string$1\", \"symbols\": [{\"literal\":\"*\"}, {\"literal\":\"*\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"powerOperator\", \"symbols\": [\"powerOperator$string$1\"]},\n    {\"name\": \"powerOperator\", \"symbols\": [{\"literal\":\"^\"}]},\n    {\"name\": \"unaryFunction\", \"symbols\": [\"namedFunction\"], \"postprocess\": id},\n    {\"name\": \"unaryFunction\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": () => 'neg'},\n    {\"name\": \"namedFunction\", \"symbols\": [\"trigFunction\"], \"postprocess\": id},\n    {\"name\": \"namedFunction$string$1\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"i\"}, {\"literal\":\"s\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$1\"]},\n    {\"name\": \"namedFunction$string$2\", \"symbols\": [{\"literal\":\"e\"}, {\"literal\":\"x\"}, {\"literal\":\"p\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$2\"]},\n    {\"name\": \"namedFunction$string$3\", \"symbols\": [{\"literal\":\"l\"}, {\"literal\":\"o\"}, {\"literal\":\"g\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$3\"]},\n    {\"name\": \"namedFunction$string$4\", \"symbols\": [{\"literal\":\"l\"}, {\"literal\":\"n\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$4\"], \"postprocess\": () => 'log'},\n    {\"name\": \"namedFunction$string$5\", \"symbols\": [{\"literal\":\"s\"}, {\"literal\":\"q\"}, {\"literal\":\"r\"}, {\"literal\":\"t\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$5\"]},\n    {\"name\": \"namedFunction$string$6\", \"symbols\": [{\"literal\":\"g\"}, {\"literal\":\"a\"}, {\"literal\":\"m\"}, {\"literal\":\"m\"}, {\"literal\":\"a\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$6\"]},\n    {\"name\": \"namedFunction$string$7\", \"symbols\": [{\"literal\":\"e\"}, {\"literal\":\"t\"}, {\"literal\":\"a\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$7\"]},\n    {\"name\": \"namedFunction$string$8\", \"symbols\": [{\"literal\":\"z\"}, {\"literal\":\"e\"}, {\"literal\":\"t\"}, {\"literal\":\"a\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$8\"]},\n    {\"name\": \"namedFunction$string$9\", \"symbols\": [{\"literal\":\"a\"}, {\"literal\":\"b\"}, {\"literal\":\"s\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$9\"]},\n    {\"name\": \"namedFunction$string$10\", \"symbols\": [{\"literal\":\"a\"}, {\"literal\":\"r\"}, {\"literal\":\"g\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$10\"]},\n    {\"name\": \"namedFunction$string$11\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"o\"}, {\"literal\":\"n\"}, {\"literal\":\"j\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$11\"]},\n    {\"name\": \"namedFunction$string$12\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"i\"}, {\"literal\":\"s\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$12\"]},\n    {\"name\": \"namedFunction$string$13\", \"symbols\": [{\"literal\":\"r\"}, {\"literal\":\"e\"}, {\"literal\":\"a\"}, {\"literal\":\"l\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$13\"]},\n    {\"name\": \"namedFunction$string$14\", \"symbols\": [{\"literal\":\"i\"}, {\"literal\":\"m\"}, {\"literal\":\"a\"}, {\"literal\":\"g\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$14\"]},\n    {\"name\": \"namedFunction$string$15\", \"symbols\": [{\"literal\":\"r\"}, {\"literal\":\"e\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$15\"], \"postprocess\": () => 'real'},\n    {\"name\": \"namedFunction$string$16\", \"symbols\": [{\"literal\":\"i\"}, {\"literal\":\"m\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"namedFunction\", \"symbols\": [\"namedFunction$string$16\"], \"postprocess\": () => 'imag'},\n    {\"name\": \"baseTrigFunction$string$1\", \"symbols\": [{\"literal\":\"s\"}, {\"literal\":\"i\"}, {\"literal\":\"n\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$1\"]},\n    {\"name\": \"baseTrigFunction$string$2\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"o\"}, {\"literal\":\"s\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$2\"]},\n    {\"name\": \"baseTrigFunction$string$3\", \"symbols\": [{\"literal\":\"t\"}, {\"literal\":\"a\"}, {\"literal\":\"n\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$3\"]},\n    {\"name\": \"baseTrigFunction$string$4\", \"symbols\": [{\"literal\":\"s\"}, {\"literal\":\"e\"}, {\"literal\":\"c\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$4\"]},\n    {\"name\": \"baseTrigFunction$string$5\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"s\"}, {\"literal\":\"c\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$5\"]},\n    {\"name\": \"baseTrigFunction$string$6\", \"symbols\": [{\"literal\":\"c\"}, {\"literal\":\"o\"}, {\"literal\":\"t\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"baseTrigFunction\", \"symbols\": [\"baseTrigFunction$string$6\"]},\n    {\"name\": \"hyperbolicTrigFunction\", \"symbols\": [\"trigFunction\", {\"literal\":\"h\"}], \"postprocess\": (data) => data.join('')},\n    {\"name\": \"trigFunction$ebnf$1$string$1\", \"symbols\": [{\"literal\":\"a\"}, {\"literal\":\"r\"}, {\"literal\":\"c\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"trigFunction$ebnf$1\", \"symbols\": [\"trigFunction$ebnf$1$string$1\"], \"postprocess\": id},\n    {\"name\": \"trigFunction$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"trigFunction\", \"symbols\": [\"trigFunction$ebnf$1\", \"baseTrigFunction\"], \"postprocess\": (data) => data.join('')},\n    {\"name\": \"trigFunction\", \"symbols\": [{\"literal\":\"a\"}, \"baseTrigFunction\"], \"postprocess\": (data) => 'arc' + data[1]},\n    {\"name\": \"trigFunction$ebnf$2$string$1\", \"symbols\": [{\"literal\":\"a\"}, {\"literal\":\"r\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"trigFunction$ebnf$2\", \"symbols\": [\"trigFunction$ebnf$2$string$1\"], \"postprocess\": id},\n    {\"name\": \"trigFunction$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"trigFunction\", \"symbols\": [\"trigFunction$ebnf$2\", \"hyperbolicTrigFunction\"], \"postprocess\": (data) => data.join('')},\n    {\"name\": \"literal\", \"symbols\": [\"complexNumber\"], \"postprocess\": id},\n    {\"name\": \"literal\", \"symbols\": [\"variable\"], \"postprocess\": id},\n    {\"name\": \"variable$ebnf$1\", \"symbols\": [/[a-z]/]},\n    {\"name\": \"variable$ebnf$1\", \"symbols\": [\"variable$ebnf$1\", /[a-z]/], \"postprocess\": function arrpush(d) {return d[0].concat([d[1]]);}},\n    {\"name\": \"variable\", \"symbols\": [\"variable$ebnf$1\"], \"postprocess\": \n        function(data) {\n            const constants = ['e', 'pi', 'tau', 'phi'];\n            const token = data[0].join('')\n            return constants.includes(token) ? ['constant', token] : ['variable', token];\n        }\n        },\n    {\"name\": \"complexNumber\", \"symbols\": [\"decimal\"], \"postprocess\": (data) => ['number', data[0], 0]},\n    {\"name\": \"complexNumber\", \"symbols\": [\"decimal\", {\"literal\":\"i\"}], \"postprocess\": (data) => ['number', 0, data[0]]},\n    {\"name\": \"complexNumber\", \"symbols\": [{\"literal\":\"i\"}], \"postprocess\": () => ['number', 0, 1]}\n]\n  , ParserStart: \"sum\"\n}\nif (typeof module !== 'undefined'&& typeof module.exports !== 'undefined') {\n   module.exports = grammar;\n} else {\n   window.grammar = grammar;\n}\n})();\n","import createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport blue from '@material-ui/core/colors/blue';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue,\n  },\n});\n\nexport default theme;\n","import React from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport './control-bar.css';\n\n\nclass ControlPanel extends React.PureComponent {\n  handleTextChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  render() {\n    return (\n      <AppBar id='app-bar'>\n\t<Toolbar disableGutters>\n\t  <IconButton\n\t    onClick={this.props.onMenuButton}\n\t  >\n\t    <MenuIcon/>\n\t  </IconButton>\n\t  <div id='function-input'>\n\t    <TextField\n\t      id='function-input'\n\t      placeholder='Enter a complex function of z'\n\t      value={this.props.value}\n\t      onChange={(event) => this.handleTextChange(event)}\n\t      error={this.props.error}\n\t      autoFocus\n\t      fullWidth\n\t    />\n\t  </div>\n\t  <div id='help-button'>\n\t    <Button\n\t      onClick={this.props.onHelpButton}\n\t    >\n\t      Help\n\t    </Button>\n\t  </div>\n\t</Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nexport default ControlPanel;\n","import nearley from 'nearley';\nimport grammar from './grammar.js';\n\nconst compiledGrammar = nearley.Grammar.fromCompiled(grammar);\n\nconst argument_names = ['z', 'w'];\n\nclass ComplexFunction {\n\tconstructor(name, body, num_args) {\n\t\tif (num_args === undefined) {num_args = 1}\n\n\t\tthis.name = name;\n\t\tthis.body = body;\n\t\tthis.num_args = num_args;\n\t}\n\n\tapply(...parameters) {\n\t\treturn `${this.name}(${parameters.join(', ')})`;\n\t}\n\n\tget declaration() {\n\t\tlet types = Array(this.num_args);\n\t\ttypes.fill('vec2');\n\t\treturn `vec2 ${this.name}(${types.join(', ')});`\n\t}\n\n\tget code() {\n\t\tlet parameters = [];\n\t\tfor (let i = 0; i < this.num_args; i++) {\n\t\t\tparameters.push(`vec2 ${argument_names[i]}`);\n\t\t}\n\t\treturn `vec2 ${this.name}(${parameters.join(', ')}) {\n\t\t\t${this.body}\n\t\t}`\n\t}\n}\n\n\n// DEFINITIONS //\n\n// Miscellaneous\nconst mul_i = new ComplexFunction('mul_i', 'return vec2(-z.y, z.x);');\nconst reciprocal = new ComplexFunction('reciprocal', `\n\tfloat magnitude = length(z);\n\treturn cconj(z) / (magnitude * magnitude);`);\nconst cconj = new ComplexFunction('cconj', 'return vec2(z.x, -z.y);');\nconst cabs = new ComplexFunction('cabs', 'return vec2(length(z), 0);');\nconst carg = new ComplexFunction('carg', 'return vec2(atan(z.y, z.x), 0);');\nconst creal = new ComplexFunction('creal', 'return vec2(z.x, 0);');\nconst cimag = new ComplexFunction('cimag', 'return vec2(z.y, 0);');\n\n// Exponentials\nconst ccis = new ComplexFunction('ccis', 'return cexp(mul_i(z));');\nconst cexp = new ComplexFunction('cexp', `\n\tfloat magnitude = exp(z.x);\n\tfloat phase = z.y;\n\treturn vec2(magnitude*cos(phase), magnitude*sin(phase));\n\t`);\nconst clog = new ComplexFunction('clog', `\n\tfloat magnitude = log(length(z));\n\tfloat phase = atan(z.y, z.x);\n\treturn vec2(magnitude, phase);\n\t`);\nconst csqrt = new ComplexFunction('csqrt', `\n\tfloat magnitude = length(z);\n\tfloat phase = atan(z.y, z.x) / 2.0;\n\treturn sqrt(magnitude) * vec2(cos(phase), sin(phase));\n\t`);\nconst csquare = new ComplexFunction('csquare', `\n\tfloat magnitude = length(z);\n\tfloat phase = atan(z.y, z.x) * 2.0;\n\treturn (magnitude * magnitude) * vec2(cos(phase), sin(phase));\n\t`);\n\n// Trigonometry //\n// Basic Trigonometric Functions\nconst csin = new ComplexFunction('csin', `\n\tvec2 iz = mul_i(z);\n\treturn -0.5 * mul_i(cexp(iz) - cexp(-iz));\n\t`);\nconst ccos = new ComplexFunction('ccos', `\n\tvec2 iz = mul_i(z);\n\treturn 0.5 * (cexp(iz) + cexp(-iz));\n\t`);\nconst ctan = new ComplexFunction('ctan', 'return cdiv(csin(z), ccos(z));');\nconst csec = new ComplexFunction('csec', 'return reciprocal(ccos(z));');\nconst ccsc = new ComplexFunction('ccsc', 'return reciprocal(csin(z));');\nconst ccot = new ComplexFunction('ccot', 'return cdiv(ccos(z), csin(z));');\n\n// Inverse Trigonomeric Functions\nconst carcsin_bottom = new ComplexFunction('carcsin_bottom',\n\t'return -mul_i(clog(mul_i(z) + csqrt(ONE - csquare(z))));');\nconst carcsin_top = new ComplexFunction('carcsin_top',\n\t'return -mul_i(clog(reciprocal(csqrt(ONE - csquare(z)) - mul_i(z))));');\nconst carcsin = new ComplexFunction('carcsin',\n\t'if (z.y < 0.0) {return carcsin_bottom(z);} else {return carcsin_top(z);}');\n\nconst carccos = new ComplexFunction('carccos',\n\t'return -mul_i(clog(z + csqrt(csquare(z) - ONE)));');\nconst carctan = new ComplexFunction('carctan',`\n\tvec2 iz = mul_i(z);\n\treturn 0.5 * mul_i(clog(ONE - iz) - clog(ONE + iz));\n\t`);\n\nconst carccot = new ComplexFunction('carccot', 'return carctan(reciprocal(z));');\nconst carcsec = new ComplexFunction('carcsec', 'return carccos(reciprocal(z));');\nconst carccsc = new ComplexFunction('carccsc', 'return carcsin(reciprocal(z));');\n\n\n// Hyperbolic Trigonometric Functions\nconst csinh = new ComplexFunction('csinh',\n\t'return 0.5 * (cexp(z) - cexp(-z));');\nconst ccosh = new ComplexFunction('ccosh',\n\t'return 0.5 * (cexp(z) + cexp(-z));');\nconst ctanh = new ComplexFunction('ctanh', `\n\tvec2 a = cexp(z);\n\tvec2 b = cexp(-z);\n\treturn cdiv(a - b, a + b);\n\t`);\nconst csech = new ComplexFunction('csech',\n\t'return reciprocal(ccosh(z));');\nconst ccsch = new ComplexFunction('ccsch',\n\t'return reciprocal(csinh(z));');\nconst ccoth = new ComplexFunction('ccoth', `\n\tvec2 a = cexp(z);\n\tvec2 b = cexp(-z);\n\treturn cdiv(a + b, a - b);\n\t`);\n\n// Inverse hyperbolic trigonometric functions\nconst carsinh = new ComplexFunction('carsinh',\n\t'return clog(z + csqrt(csquare(z) + ONE));');\nconst carcosh = new ComplexFunction('carcosh',\n\t'return clog(z + csqrt(csquare(z) - ONE));');\nconst cartanh = new ComplexFunction('cartanh',\n\t'return 0.5 * clog(cdiv(ONE + z, ONE - z));');\nconst carsech = new ComplexFunction('carsech',\n\t'return clog(cdiv(ONE + csqrt(ONE - csquare(z)), z));');\nconst carcsch = new ComplexFunction('carcsch',\n\t'return clog(cdiv(ONE + csqrt(ONE + csquare(z)), z));');\nconst carcoth = new ComplexFunction('carcoth',\n\t'return 0.5 * clog(cdiv(z + ONE, z - ONE));');\n\n\n// Infix Operators //\nconst cneg = new ComplexFunction('cneg', 'return -z;');\nconst cadd = new ComplexFunction('cadd', 'return z+w;', 2);\nconst csub = new ComplexFunction('csub', 'return z-w;', 2);\nconst cmul = new ComplexFunction('cmul', `\n\treturn vec2(z.x*w.x-z.y*w.y, z.x*w.y+z.y*w.x);\n\t`, 2);\nconst cdiv = new ComplexFunction('cdiv', `\n\tfloat magnitude = length(w);\n\treturn cmul(z, cconj(w)) / (magnitude*magnitude);\n\t`, 2);\nconst cpow = new ComplexFunction('cpow', 'return cexp(cmul(clog(z), w));', 2);\n\n// Lanczos approximation\nconst cgamma = new ComplexFunction('cgamma',\n\t'if (z.x < 0.5) {return cgamma_left(z);} else {return cgamma_right(z);}');\nconst cgamma_left = new ComplexFunction('cgamma_left',\n\t'return PI * reciprocal(cmul(csin(PI*z), cgamma_right(ONE-z)));');\nconst cgamma_right = new ComplexFunction('cgamma_right', `\n\tvec2 w = z - ONE;\n\tvec2 t = w + vec2(7.5, 0);\n\tvec2 x = vec2(0.99999999999980993, 0);\n\tx += 676.5203681218851 * reciprocal(w + vec2(1, 0));\n\tx -= 1259.1392167224028 * reciprocal(w + vec2(2, 0));\n\tx += 771.32342877765313 * reciprocal(w + vec2(3, 0));\n\tx -= 176.61502916214059 * reciprocal(w + vec2(4, 0));\n\tx += 12.507343278686905 * reciprocal(w + vec2(5, 0));\n\tx -= .13857109526572012 * reciprocal(w + vec2(6, 0));\n\tx += 9.9843695780195716e-6 * reciprocal(w + vec2(7, 0));\n\tx += 1.5056327351493116e-7 * reciprocal(w + vec2(8, 0));\n\treturn sqrt(TAU) * cmul(cpow(t, w + vec2(0.5, 0)), cmul(cexp(-t), x));\n\t`);\nconst cfact = new ComplexFunction('cfact', 'return cgamma(z + ONE);');\n\n// Dirichlet eta function\nconst ceta = new ComplexFunction('ceta',\n\t'if (z.x < 0.0) {return ceta_left(z);} else {return ceta_right(z);}');\nconst ceta_left = new ComplexFunction('ceta_left', `\n\tz = -z;\n\n\tvec2 component_a = cmul(z, csin(z * PI/2.0));\n\tvec2 component_b = cmul(cgamma(z), ceta_right(z + ONE));\n\tvec2 multiplier_a = cexp(-log(PI) * (z + ONE));\n\tvec2 multiplier_b = cdiv(ONE - cexp(-LN2 * (z + ONE)), ONE - cexp(-LN2 * z));\n\n\tvec2 component = cmul(component_a, component_b);\n\tvec2 multiplier = cmul(multiplier_a, multiplier_b);\n\n\treturn 2.0 * cmul(component, multiplier);\n\t`);\n\nconst ceta_right = new ComplexFunction('ceta_right', `\n\tvec2 result = vec2(1.000000000000000, 0.0);\n\tresult -= 1.00000000000000000000 * cexp(-0.69314718055994528623 * z);\n\tresult += 1.00000000000000000000 * cexp(-1.09861228866810978211 * z);\n\tresult -= 1.00000000000000000000 * cexp(-1.38629436111989057245 * z);\n\tresult += 0.99999999999999555911 * cexp(-1.60943791243410028180 * z);\n\tresult -= 0.99999999999979938270 * cexp(-1.79175946922805495731 * z);\n\tresult += 0.99999999999386091076 * cexp(-1.94591014905531323187 * z);\n\tresult -= 0.99999999986491050485 * cexp(-2.07944154167983574766 * z);\n\tresult += 0.99999999776946757457 * cexp(-2.19722457733621956422 * z);\n\tresult -= 0.99999997147371189055 * cexp(-2.30258509299404590109 * z);\n\tresult += 0.99999971045373836631 * cexp(-2.39789527279837066942 * z);\n\tresult -= 0.99999762229395061652 * cexp(-2.48490664978800035456 * z);\n\tresult += 0.99998395846577381452 * cexp(-2.56494935746153673861 * z);\n\tresult -= 0.99990996358087780305 * cexp(-2.63905732961525840707 * z);\n\tresult += 0.99957522481587246510 * cexp(-2.70805020110221006391 * z);\n\tresult -= 0.99830090896564482872 * cexp(-2.77258872223978114491 * z);\n\tresult += 0.99419535104495204703 * cexp(-2.83321334405621616526 * z);\n\tresult -= 0.98295446518722640050 * cexp(-2.89037175789616451738 * z);\n\tresult += 0.95672573151919981793 * cexp(-2.94443897916644026225 * z);\n\tresult -= 0.90449212250748245445 * cexp(-2.99573227355399085425 * z);\n\tresult += 0.81569498718756294764 * cexp(-3.04452243772342301398 * z);\n\tresult -= 0.68698555062628596790 * cexp(-3.09104245335831606667 * z);\n\tresult += 0.52834368695773525904 * cexp(-3.13549421592914967505 * z);\n\tresult -= 0.36280435095576935023 * cexp(-3.17805383034794575181 * z);\n\tresult += 0.21751716776255453079 * cexp(-3.21887582486820056360 * z);\n\tresult -= 0.11124997091266028426 * cexp(-3.25809653802148213586 * z);\n\tresult += 0.04729731398489586680 * cexp(-3.29583686600432912428 * z);\n\tresult -= 0.01619245778522847637 * cexp(-3.33220451017520380432 * z);\n\tresult += 0.00427566222821304867 * cexp(-3.36729582998647414271 * z);\n\tresult -= 0.00081524972526846008 * cexp(-3.40119738166215546116 * z);\n\tresult += 0.00009970680093076545 * cexp(-3.43398720448514627179 * z);\n\tresult -= 0.00000586510593565794 * cexp(-3.46573590279972654216 * z);\n\treturn result;\n\t`);\n\n// Riemann zeta function\nconst czeta = new ComplexFunction('czeta',\n\t'return cdiv(ceta(z), ONE - cexp(LN2 * (ONE - z)));');\n\n\nvar complex_functions = {\n\t'mul_i': mul_i,\n\t'reciprocal': reciprocal,\n\t'cgamma_left': cgamma_left,\n\t'cgamma_right': cgamma_right,\n\t'ceta_left': ceta_left,\n\t'ceta_right': ceta_right,\n\t'square': csquare,\n\n\t'real': creal,\n\t're': creal,\n\t'imag': cimag,\n\t'im': cimag,\n\n\t'conj': cconj,\n\t'abs': cabs,\n\t'arg': carg,\n\t'cis': ccis,\n\n\t'exp': cexp,\n\t'log': clog,\n\t'ln': clog,\n\n\t'sqrt': csqrt,\n\t'^': cpow,\n\t'sin': csin,  'cos': ccos,  'tan': ctan,\n\t'sec': csec,  'csc': ccsc,  'cot': ccot,\n\n\t'carcsin_top': carcsin_top,\n\t'carcsin_bottom': carcsin_bottom,\n\n\t'arcsin': carcsin,  'arccos': carccos,  'arctan': carctan,\n\t'arcsec': carcsec,  'arccsc': carccsc,  'arccot': carccot,\n\t'sinh': csinh, 'cosh': ccosh, 'tanh': ctanh,\n\t'sech': csech, 'csch': ccsch, 'coth': ccoth,\n\t'arsinh': carsinh, 'arcosh': carcosh, 'artanh': cartanh,\n\t'arsech': carsech, 'arcsch': carcsch, 'arcoth': carcoth,\n\t'$': cneg,\n\t'+': cadd,\n\t'-': csub,\n\t'*': cmul,\n\t'/': cdiv,\n\t'!': cfact,\n\t'gamma': cgamma,\n\t'eta': ceta,\n\t'zeta': czeta\n};\n\nfunction parseExpression(expression) {\n    try {\n        const parser = new nearley.Parser(compiledGrammar);\n        parser.feed(expression)\n        const result = parser.results[0];\n        return result || null;\n    } catch (error) {\n        console.error(error);\n        return null;\n    }\n}\n\nconst declarations = new Set(Object.values(complex_functions).map(f => f.declaration))\nconst definitions = new Set(Object.values(complex_functions).map(f => f.code))\n\nconst declarationString = Array.from(declarations).join('\\n');\nconst definitionString = Array.from(definitions).join('\\n');\n\nconst functionDefinitions = `${declarationString}\\n\\n${definitionString}`;\n\nexport {complex_functions, parseExpression, functionDefinitions};\n","import {get, isNil} from 'lodash';\nconst math = require('mathjs');\n\nconst I = math.complex(0, 1);\nconst fns = {\n    sub: math.subtract,\n    neg: math.unaryMinus,\n    mul: math.multiply,\n    div: math.divide,\n    real: math.re,\n    imag: math.im,\n\n    arcsin: math.asin,\n    arccos: math.acos,\n    arctan: math.atan,\n    arcsec: math.asec,\n    arccsc: math.acsc,\n    arccot: math.acot,\n\n    arsinh: math.asinh,\n    arcosh: math.acosh,\n    artanh: math.atanh,\n    arsech: math.asech,\n    arcsch: math.acsch,\n    arcoth: math.acoth,\n\n    cis: z => math.exp(math.multiply(z, I)),\n}\n\n/**\n * Returns a JS function that evaluates\n * the given AST.\n *\n * Inputs of the returned function\n * are [real, imag],\n * representing the complex input.\n * The returned function outputs a\n * 2-tuple [real, imag]\n * representing the complex output.\n */\nfunction toJS(ast, variables) {\n    const errorValue = [NaN, NaN];\n    if (ast === null) {return z => errorValue;}\n\n    const constants = {\n        'e': Math.E,\n        'pi': Math.PI,\n        'tau': 2 * Math.PI,\n        'phi': (1 + Math.sqrt(5))/2,\n    }\n\n    // Destructure this level of the AST\n    const [operator, ...args] = ast;\n\n    // Complex number literal\n    if (operator === 'number') {return z => args;}\n\n    // User-defined variable\n    if (operator === 'variable') {\n        const [name] = args;\n        if (name === 'z') {return z => z;}\n        return z => [get(variables, name, NaN), 0];\n    }\n\n    // Built-in constant\n    if (operator === 'constant') {\n        const [name] = args;\n        return z => [constants[name], 0];\n    }\n\n    // Built-in function\n    const func = math[operator] || fns[operator];\n    if (!isNil(func)) {\n        const destructure = z => isNil(z.re) ? [z, 0] : [z.re, z.im];\n        return z => destructure(func(...args.map(\n                subtree => math.complex(...toJS(subtree, variables)(z))\n        )));\n    }\n\n    // Fallback if no match\n    return z => errorValue;\n}\n\nexport default toJS;\n","import {get} from 'lodash';\n\nimport toJS from './to-js';\n\nfunction toGLSL(ast) {\n    if (ast === null) {return null;}\n\n    const infixOperators = {\n        'add': '+',\n        'sub': '-',\n    };\n\n    const [operator, ...args] = ast;\n\n    if (operator === 'number') {\n        const [real, imag] = args;\n        return `vec2(${real}, ${imag})`;\n    }\n\n    if (operator === 'variable') {return args[0];}\n    if (operator === 'constant') {return 'C_' + args[0].toUpperCase();}\n    if (operator in infixOperators) {\n        return toGLSL(args[0]) + infixOperators[operator] + toGLSL(args[1]);\n    }\n\n    // Unary function\n    const unaryFunctions = {\n        'factorial': 'cfact',\n    };\n    const internalName = get(unaryFunctions, operator, 'c' + operator);\n\n    return internalName + '(' + args.map(toGLSL).join(', ') + ')';\n}\n\nexport {toGLSL, toJS};\n","import {\n  functionDefinitions,\n} from './complex-functions.js';\nimport {\n    toGLSL\n} from './translators';\n\nfunction loadShader(gl, type, source) {\n  // Create and compile shader\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n\n  // Test for successful compilation\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log('Shader failed to compile: '\n      + gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n    return null;\n  }\n\n  return shader;\n}\n\n\nfunction createShaderProgram(gl, expression, customShader, variableNames) {\n  const fragmentShaderSource = getFragmentShaderSource(\n    expression,\n    customShader, \n    gl.drawingBufferWidth, gl.drawingBufferHeight,\n    variableNames\n  );\n\n  if (fragmentShaderSource === null) {return null;}\n\n  // Load vertex and fragment shaders\n  const vertexShader = loadShader(gl,\n    gl.VERTEX_SHADER, vertexShaderSource);\n  const fragmentShader = loadShader(gl,\n    gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n  if (vertexShader === null | fragmentShader === null) {\n    return null;\n  }\n\n  // Create shader program\n  const shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  // Test for successful linkage\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    console.log('Shader program failed to initialize: '\n      + gl.getProgramInfoLog(shaderProgram));\n    return null;\n  }\n\n  return shaderProgram;\n}\n\nexport default createShaderProgram;\n\n\nconst vertexShaderSource = `\n  attribute vec2 a_position;\n\n  void main() {\n    gl_Position = vec4(a_position, 0, 1);\n  }\n`;\n\n\nfunction getFragmentShaderSource(expression, customShader, width, height, variableNames) {\n  const x_offset = (width/2).toFixed(2);\n  const y_offset = (height/2).toFixed(2);\n  const dpr = window.devicePixelRatio.toFixed(4);\n\n  const variableDeclarations = variableNames.map(\n    (name) => `uniform vec2 ${name};`\n  ).join('\\n');\n\n  let custom_code = '';\n  let glsl_expression = null;\n  if (customShader) {\n    custom_code = expression;\n    glsl_expression = 'mapping(z)';\n  } else {\n    glsl_expression = toGLSL(expression);\n  }\n  if (glsl_expression === null) {return null;}\n\n  console.log('Shader Code:', glsl_expression);\n\n  return `\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n\n  const float PI = 3.14159265358979323846264;\n  const float TAU = 2.0 * PI;\n  const float E = 2.718281845904523;\n  const float LN2 = 0.69314718055994531;\n  const float PHI = 1.61803398874989484820459;\n  const float SQ2 = 1.41421356237309504880169;\n\n  const float checkerboard_scale = 0.25;\n\n  const vec2 ONE = vec2(1, 0);\n  const vec2 I = vec2(0, 1);\n  const vec2 C_PI = vec2(PI, 0);\n  const vec2 C_TAU = vec2(TAU, 0);\n  const vec2 C_E = vec2(E, 0);\n  const vec2 C_PHI = vec2(PHI, 0);\n\n  ${variableDeclarations}\n\n  ${functionDefinitions}\n\n  vec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n  }\n\n  vec3 get_color(vec2 z, float derivative) {\n    float magnitude = length(z);\n    float phase = atan(z.y, z.x);\n\n    float color_value;\n    float color_saturation = 1.0;\n    if (continuous_gradient.x > 0.5) {\n      float color_lightness = 0.5 + atan(0.5 * log(magnitude))/PI;\n      color_saturation = 1.0;\n\n      if (invert_gradient.x > 0.5) {\n\tcolor_lightness = 1.0 - color_lightness;\n      }\n\n      /* HSL to HSV conversion */\n      color_lightness *= 2.0;\n      color_saturation *= 1.0 - abs(color_lightness - 1.0);\n      color_value = (color_lightness + color_saturation) / 2.0;\n      color_saturation /= color_value;\n    } else {\n      color_value = 0.5 * exp2(fract(log2(magnitude)));\n\n      if (invert_gradient.x > 0.5) {\n\tcolor_value = 1.5 - color_value;\n      }\n    }\n\n    if (enable_checkerboard.x > 0.5) {\n      vec2 checkerboard_components = floor(2.0 * fract(z/checkerboard_scale));\n      float checkerboard = floor(2.0 * fract((checkerboard_components.x + checkerboard_components.y)/2.0));\n\n      // Anti-Moire\n      float decay_factor = clamp(40.0 * derivative, 1.0, 10000.0) - 1.0;\n      checkerboard = 0.5 + (checkerboard - 0.5) / (1.0 + 3.0 * decay_factor);\n\n      color_value *= 0.8 + 0.2 * checkerboard;\n    }\n\n    vec3 hsv_color = vec3(phase/TAU, color_saturation, color_value);\n    return hsv2rgb(hsv_color);\n  }\n\n  ${custom_code}\n\n  const vec2 screen_offset = vec2(${x_offset}, ${y_offset});\n  vec2 from_pixel(vec2 xy) {\n    vec2 plot_center = vec2(center_x.x, center_y.x);\n\n    float scale = exp(log_scale.x) * ${dpr};\n\n    return (xy - screen_offset) / scale + plot_center;\n  }\n\n  vec2 internal_mapping(vec2 xy) {\n      vec2 z = from_pixel(xy);\n      return ${glsl_expression};\n  }\n\n  void main() {\n    /*\n     * The plot is rendered with 4-Rook supersampling\n     * on desktop devices,\n     * downgraded to 2-point supersampling\n     * on mobile.\n     */\n\n    // Set up for supersampling\n    const vec2 A = vec2(0.125, 0.375);\n    const vec2 B = vec2(0.375, -0.125);\n    vec2 xy = gl_FragCoord.xy;\n\n    // 4-Rook supersampling\n    vec2 w1 = internal_mapping(xy + A);\n    vec2 w2 = internal_mapping(xy - A);\n    vec2 w3;\n    vec2 w4;\n\n    float derivative;\n\n    if (enable_supersampling.x > 0.5) {\n        w3 = internal_mapping(xy + B);\n        w4 = internal_mapping(xy - B);\n\n        // Anti-Moire\n        derivative = 0.5 * (length(w1 - w2) + length(w3 - w4));\n    } else {\n        // Anti-Moire\n        derivative = length(w1 - w2);\n    }\n\n    vec3 color1 = get_color(w1, derivative);\n    vec3 color2 = get_color(w2, derivative);\n    vec3 color3;\n    vec3 color4;\n\n    vec3 color;\n\n    if (enable_supersampling.x > 0.5) {\n        color3 = get_color(w3, derivative);\n        color4 = get_color(w4, derivative);\n\n        color = 0.25 * (color1 + color2 + color3 + color4);\n    } else {\n        color = 0.5 * (color1 + color2);\n    }\n\n    gl_FragColor = vec4(color, 1.0);\n  }\n  `;\n}\n","import createShaderProgram from './shaders.js';\n\n\nfunction initBuffers(gl) {\n  const vertexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\n  // Positions of vertices (two triangles)\n  const vertices = [\n    -1, -1,\n    1, -1,\n    -1, 1,\n\n    -1, 1,\n    1, -1,\n    1, 1\n  ]\n\n  // Initialize buffer with position data\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(vertices),\n    gl.STATIC_DRAW\n  );\n}\n\nfunction initializeScene(gl, expression, customShader, variableNames) {\n  const shaderProgram = createShaderProgram(\n    gl,\n    expression, customShader,\n    variableNames\n  );\n\n  if (shaderProgram === null) {\n    console.log(\n      `Expression ${expression} could not be compiled!`\n    );\n    return null;\n  }\n\n  // Initialize shader program\n  initBuffers(gl);\n  gl.useProgram(shaderProgram);\n\n  // Initialize vertex array\n  const positionLocation = gl.getAttribLocation(shaderProgram, 'a_position');\n  gl.enableVertexAttribArray(positionLocation);\n  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n  // Retrieve pointers to variables\n  const variableLocations = {};\n  for (const name of variableNames) {\n    variableLocations[name] = gl.getUniformLocation(shaderProgram, name);\n  }\n  return variableLocations;\n}\n\nfunction drawScene(gl, variables) {\n//  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n//  gl.clear(gl.COLOR_BUFFER_BIT);\n\n  // Set variable values\n  for (const [location, value] of Object.values(variables)) {\n    gl.uniform2f(location, value, 0);\n  }\n\n  // Draw scene\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n}\n\nexport {initializeScene, drawScene};\n","function formatComplex(x, y) {\n    if (x !== 0) {\n        if (y !== 0) {\n            return formatReal(x, false) + formatReal(y, true) + '\\\\, i';\n        } else {\n            return formatReal(x, false);\n        }\n    } else if (y !== 0) {\n        return formatReal(y, false) + '\\\\, i';\n    } else {\n        return '0';\n    }\n}\n\nfunction formatReal(x, forceSign) {\n    const magnitude = Math.abs(x);\n\n    let exponent = magnitude > 0 ? Math.floor(Math.log10(magnitude)) : 0;\n    if (Math.abs(exponent) < 3) {exponent = 0;}\n\n    const mantissa = magnitude * Math.pow(10, -exponent);\n\n    const formattedMagnitude = mantissa.toFixed(3);\n    const formattedExponent = exponent === 0 ? '' : `\\\\times 10^{${exponent}}`;\n\n    const sign = x < 0 ? '-' : (\n        forceSign ? '+' : ''\n    );\n\n    return sign + formattedMagnitude + formattedExponent;\n}\n\nexport {formatComplex};\n","import React, {PureComponent} from 'react';\n\nimport {isNil} from 'lodash';\n\nimport {InlineMath} from 'react-katex';\n\nimport {formatComplex} from '../util';\n\n\nclass CoordinateOverlay extends PureComponent {\n    state = {\n        faded: false\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.fadeTimer = null;\n        this.lastX = null;\n        this.lastY = null;\n    }\n\n    hasChanged() {\n        const {x, y} = this.props;\n        const changed = (this.lastX !== x) || (this.lastY !== y);\n\n        this.lastX = x;\n        this.lastY = y;\n\n        return changed;\n    }\n\n    componentDidMount() {\n        this.componentDidUpdate();\n    }\n\n    componentDidUpdate() {\n        if (this.hasChanged()) {\n            if (this.fadeTimer !== null) {\n                clearTimeout(this.fadeTimer);\n            }\n            this.fadeTimer = setTimeout(() => this.setState({faded: true}), 2e3);\n            this.setState({faded: false});\n        }\n    }\n\n    render() {\n        const {faded} = this.state;\n        const {x, y, mapping} = this.props;\n\n        const [u, v] = mapping([x, y]);\n\n        return <div className='container'>\n            <InlineMath>{'z = ' + formatComplex(x, y)}</InlineMath>\n            {isFinite(u) && isFinite(v) ? <InlineMath>{'f(z) = ' + formatComplex(u, v)}</InlineMath> : null}\n            <style jsx>{`\n                .container {\n                    position: absolute;\n                    bottom: 0;\n                    right: 0;\n                    z-index: 20;\n\n                    padding: 5px 20px;\n                    min-width: 180px;\n\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n\n                    background-color: hsla(213, 5%, 15%, 0.3);\n                    border: 1px solid hsla(213, 5%, 90%, 0.1);\n                    box-shadow: -1px -1px 4px hsla(213, 10%, 10%, 0.1);\n\n                    border-radius: 8px 0 0 0;\n\n                    backdrop-filter: blur(6px);\n\n                    color: white;\n                    font-size: 22px;\n                    line-height: 1;\n\n                    opacity: ${faded ? 0 : 1};\n                    transition: ${faded ? 1 : 0.1}s opacity ease-out;\n                }\n\n                @media (max-width: 700px) {\n                    .container {\n                        border-radius: 0;\n                        left: 0;\n                        font-size: 18px;\n                    }\n                }\n            `}</style>\n        </div>;\n   }\n}\n\nexport default CoordinateOverlay;\n","import React, {PureComponent} from 'react';\n\nimport {mapValues} from 'lodash';\n\nimport {initializeScene, drawScene} from '../../gl-code/scene.js';\nimport {toJS} from '../../gl-code/translators';\n\nimport CoordinateOverlay from './CoordinateOverlay';\n\nimport './function-plot.css';\n\n\nconst FPS_LIMIT = 60;\n\nlet canvasSize = [];\n\nfunction pixelToPlot(x, y, variables) {\n    const scale = Math.exp(variables.log_scale);\n    const offset_x = variables.center_x;\n    const offset_y = variables.center_y;\n\n    const plot_x = (x - canvasSize[0]/2) / scale + offset_x;\n    const plot_y = (canvasSize[1]/2 - y) / scale + offset_y;\n    return [plot_x, plot_y];\n}\n\nfunction plotToPixel(plot_x, plot_y, variables) {\n    const scale = Math.exp(variables.log_scale);\n    const offset_x = variables.center_x;\n    const offset_y = variables.center_y;\n\n    const x = scale * (plot_x - offset_x) + canvasSize[0]/2;\n    const y = -scale * (plot_y - offset_y) - canvasSize[1]/2;\n    return [x, y];\n}\n\nclass FunctionPlot extends PureComponent {\n  state = {\n      position: [NaN, NaN, 0],\n      mouseDown: false,\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.gl = null;\n\n    this.variableLocations = {};\n    this.initialized = false;\n\n    this.lastUpdate = null; // Timestamp of last update, for debouncing\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.compilePlot.bind(this));\n\n    this.initializeWebGL();\n    this.componentDidUpdate();\n    this.compilePlot();\n  }\n\n  // Perform a full update of the plot (expensive!)\n  compilePlot() {\n    const {onError} = this.props;\n    this.initializePlot();\n    this.updatePlot();\n    onError(!this.initialized);\n  }\n  \n  componentDidUpdate() {\n      const {position, mouseDown} = this.state;\n\n      // Only do a full update if something other than mouse position/state has changed\n      if (this.lastPosition === position && this.lastMouseDown === mouseDown) {\n          this.compilePlot();\n      }\n\n      this.lastPosition = position;\n      this.lastMouseDown = mouseDown;\n  }\n\n  getPosition(mouseEvent) {\n    const nativeEvent = mouseEvent.nativeEvent;\n    \n    if (nativeEvent.targetTouches !== undefined) {\n      const touches = nativeEvent.targetTouches;\n      if (touches.length === 1) {\n\treturn [touches[0].pageX, touches[0].pageY, 1];\n      } else {\n\tconst [x0, y0] = [touches[0].pageX, touches[0].pageY];\n\tconst [x1, y1] = [touches[1].pageX, touches[1].pageY];\n\n\tconst centerX = (x0 + x1) / 2;\n\tconst centerY = (y0 + y1) / 2;\n\tconst logDistance = Math.log(Math.hypot(x1-x0, y1-y0));\n\treturn [centerX, centerY, logDistance];\n      }\n    } else {\n      return [nativeEvent.pageX, nativeEvent.pageY, 1];\n    }\n  }\n\n  updatePosition(mouseEvent) {\n      this.setState({position: this.getPosition(mouseEvent)});\n  }\n\n  handleZoom(wheelEvent, deltaLogScale) {\n    const {position} = this.state;\n    const {variables} = this.props;\n\n    if (!position.every(isFinite)) {return;}\n    const [x, y, _] = position;\n\n    // Recenter plot at scroll location\n    const [mouse_plotx, mouse_ploty] = pixelToPlot(x, y, variables);\n    variables.center_x = mouse_plotx;\n    variables.center_y = mouse_ploty;\n    \n    // Change scale\n    if (deltaLogScale === undefined) {\n      deltaLogScale = (wheelEvent.deltaY > 0) ? -0.05: 0.05;\n    }\n    variables.log_scale += deltaLogScale;\n\n    // Move center back onto mouse\n    const [new_mouse_plotx, new_mouse_ploty] = pixelToPlot(x, y, variables);\n    const [x_shift, y_shift] = [new_mouse_plotx - mouse_plotx, new_mouse_ploty - mouse_ploty];\n    variables.center_x -= x_shift;\n    variables.center_y -= y_shift;\n\n    this.updatePlot();\n  }\n\n  handleMouseDown(event) {\n    this.updatePosition(event);\n    this.setState({mouseDown: true});\n  }\n\n  handleMouseUp(event) {\n    this.setState({mouseDown: false});\n  }\n\n  handleMouseMove(event) {\n    const {mouseDown} = this.state;\n    const {variables} = this.props;\n\n    // Handle dragging of plot\n    if (mouseDown) {\n      const {position} = this.state;\n      const [x, y, logDistance] = this.getPosition(event);\n\n      const deltaPosition = [\n\tx - position[0],\n\ty - position[1],\n\tlogDistance - position[2]\n      ];\n\n      const scale = Math.exp(variables.log_scale);\n      variables.center_x -= deltaPosition[0] / scale;\n      variables.center_y += deltaPosition[1] / scale;\n      this.handleZoom(null, deltaPosition[2]);\n      this.updatePlot();\n    }\n    this.updatePosition(event);\n  }\n\n  handleTouchStart(event) {\n    this.handleMouseDown(event);\n  }\n\n  handleTouchMove(event) {\n    this.handleMouseMove(event);\n  }\n\n  handleTouchEnd(event) {\n    this.handleMouseUp(event);\n  }\n\n  handleVariableUpdate(variables) {\n    for (const [name, value] of Object.entries(variables)) {\n      variables[name] = value;\n    }\n\n    this.updatePlot();\n  }\n  \n  initializeWebGL() {\n    const canvas = this.refs.canvas;\n    this.gl = canvas.getContext('webgl');\n\n    if (this.gl === null) {\n      console.error('Unable to initialize WebGL.');\n      return null;\n    }\n  }\n\n  initializePlot() {\n    const {expression, variables} = this.props;\n\n    const canvas = this.refs.canvas;\n    let dpr = window.devicePixelRatio;\n\n    // Resize canvas and WebGL viewport\n    canvas.width = canvas.offsetWidth * dpr;\n    canvas.height = canvas.offsetHeight * dpr;\n\n    canvasSize = [canvas.offsetWidth, canvas.offsetHeight];\n    this.gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // Initialize scene and obtain WebGL variable pointers\n    const variableLocations = initializeScene(\n      this.gl,\n      expression,\n      variables.custom_function > 0.5,\n      Object.keys(variables)\n    );\n\n    // Check if initialized\n    this.initialized = (variableLocations !== null);\n    if (this.initialized) {\n      this.variableLocations = variableLocations;\n    }\n  }\n\n  updatePlot() {\n    const {variables} = this.props;\n    const variableAssignments = {};\n    for (const [name, value] of Object.entries(variables)) {\n      variableAssignments[name] = [this.variableLocations[name], value];\n    }\n\n    // Debounce\n    const now = +new Date();\n    if (this.lastUpdate === null || now - this.lastUpdate > 1e3 / FPS_LIMIT) {\n        drawScene(this.gl, variableAssignments);\n        this.lastUpdate = now;\n    }\n  }\n\n  render() {\n    const {position, mouseDown} = this.state;\n    const {expression, variables} = this.props;\n\n    const [x, y] = pixelToPlot(position[0], position[1], variables);\n    const mapping = toJS(expression, variables);\n\n    return (\n      <div id='function-plot'>\n\t<div id='fallback-text'>\n\t  Please enable WebGL to use the plotter.\n\t</div>\n\t<canvas\n\t  ref='canvas'\n\n\t  onMouseDown={(event) => this.handleMouseDown(event)}\n\t  onMouseMove={(event) => this.handleMouseMove(event)}\n\t  onMouseUp={(event) => this.handleMouseUp(event)}\n\n\t  onMouseEnter={(event) => this.handleMouseMove(event)}\n\t  onMouseLeave={(event) => this.handleMouseUp(event)}\n\n\t  onTouchStart={(event) => this.handleTouchStart(event)}\n\t  onTouchMove={(event) => this.handleTouchMove(event)}\n\t  onTouchEnd={(event) => this.handleTouchEnd(event)}\n\n\t  onWheel={(event) => this.handleZoom(event)}\n\n          className='main-plot'\n\t/>\n        {isFinite(x) && isFinite(y) ?\n            <CoordinateOverlay x={x} y={y} mapping={mapping}/>\n        : null}\n\n        <style jsx>{`\n            canvas.main-plot {\n                cursor: ${mouseDown ? 'grabbing' : 'grab'};\n            }\n        `}</style>\n      </div>\n    );\n  }\n}\n\nexport {pixelToPlot, plotToPixel};\nexport default FunctionPlot;\n","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\n\nimport './side-panel.css';\n\n\nconst styles = theme => ({\n  toolbar: theme.mixins.toolbar\n});\n\nclass SidePanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n    this.state = {\n      width: null\n    }\n  }\n  \n  componentDidMount() {\n    this.updateWidth();\n    window.addEventListener('resize', this.updateWidth.bind(this));\n  }\n\n  updateWidth() {\n    this.setState({width: window.innerWidth});\n  }\n\n  render() {\n    if (this.state.width > this.props.transitionWidth) {\n      return (\n\t<Drawer\n\t  anchor={this.props.anchor}\n\t  open={this.props.open}\n\t  variant='persistent'\n\t  classes={{\n\t    paper: this.props.className\n\t  }}\n\t>\n\t  <div className={this.classes.toolbar}/>\n\t  <div className='drawer-content'>\n\t    {this.props.children}\n\t  </div>\n\t</Drawer>\n      );\n    } else {\n      return (\n\t<SwipeableDrawer\n\t  anchor={this.props.anchor}\n\t  open={this.props.open}\n\t  onOpen={this.props.onToggle}\n\t  onClose={this.props.onToggle}\n\t  classes={{\n\t    paper: this.props.className\n\t  }}\n\t  disableDiscovery\n\t  disableSwipeToOpen\n\t>\n\t  <div className='drawer-content'>\n\t    {this.props.children}\n\t  </div>\n\t</SwipeableDrawer>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles)(SidePanel);\n","const functions = new Set([\n\t'sin', 'cos', 'tan', 'sec', 'csc', 'cot',\n\t'arcsin', 'arccos', 'arctan', 'arcsec', 'arccsc', 'arccot',\n\t'sinh', 'cosh', 'tanh', 'sech', 'csch', 'coth',\n\t'arsinh', 'arcosh', 'artanh', 'arsech', 'arcsch', 'arcoth',\n\t'exp', 'log', 'ln',\n\t'sqrt', 'gamma', 'eta', 'zeta',\n\n\t'abs', 'arg',\n\t'conj', 'cis',\n\n\t'real', 'imag',\n\t're', 'im',\n]);\nconst constants = new Set([\n\t'e', 'pi', 'tau', 'phi'\n]);\n\nexport {functions, constants};\n","import {complex_functions} from './complex-functions.js';\nimport {functions, constants} from './parse-expression.js';\n\n\nconst restrictedFunctions = [];\n\nrestrictedFunctions.push(...Object.keys(complex_functions));\nrestrictedFunctions.push(...Object.values(complex_functions).map(f => f.name));\nrestrictedFunctions.push(...functions);\nrestrictedFunctions.push(...constants);\nrestrictedFunctions.push('z', 'i');\n\n/* GLSL Keywords */\nrestrictedFunctions.push(\n  'attribute', 'const', 'uniform', 'varying',\n  'layout',\n  'centroid', 'flat', 'smooth', 'noperspective',\n  'break', 'continue', 'do', 'for', 'while', 'switch', 'case', 'default',\n  'if', 'else',\n  'in', 'out', 'inout',\n  'float', 'int', 'void', 'bool', 'true', 'false',\n  'invariant', 'discard', 'return',\n  'lowp', 'mediump', 'highp', 'precision',\n  'struct',\n  'common', 'partition', 'active',\n  'asm', 'class', 'union', 'enum', 'typedef', 'template',\n  'this', 'packed',\n  'goto', 'inline', 'noinline', 'volatile', 'public', 'static',\n  'extern', 'external', 'interface',\n  'long', 'short', 'double', 'half', 'fixed', 'unsigned', 'superp',\n  'input', 'output',\n  'filter',\n  'sizeof', 'cast',\n  'namespace', 'using'\n);\n\n/* GLSL Built-In Functions */\nrestrictedFunctions.push(\n  'radians', 'degrees',\n  'sin', 'cos', 'tan',\n  'asin', 'acos', 'atan',\n  'sinh', 'cosh', 'tanh',\n  'asinh', 'acosh', 'atanh',\n  'pow', 'exp', 'log', 'exp2', 'log2',\n  'sqrt', 'inversesqrt',\n  'abs', 'sign', 'floor', 'trunc', 'round',\n  'ceil', 'fract',\n  'mod', 'modf', 'min', 'max',\n  'clamp', 'mix', 'step', 'smoothstep',\n  'isnan', 'isinf',\n  'length', 'distance', 'dot',\n  'cross', 'normalize', 'ftransform',\n  'faceforward',\n  'reflect', 'refract',\n  'transpose', 'inverse',\n  'equal', 'any', 'all', 'not',\n  'texture'\n);\n\nconst functionList = new Set(restrictedFunctions);\nexport default functionList;\n","import React from 'react';\n\nimport functionList from '../../gl-code/function-list.js';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\n\nconst blacklist = functionList;\n\nclass VariableAdder extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      errorMessage: ''\n    };\n  }\n\n  setValue(value) {\n    this.setState({value: value, errorMessage: ''});\n  }\n\n  handleKeyPress(event) {\n    if (event.keyCode === 13) {\n      this.handleClick();\n    }\n  }\n\n  handleClick() {\n    const name = this.state.value.toLowerCase();\n    if (name === '') {\n      this.setState({errorMessage: 'Must be nonempty'});\n    } else if (name.match(/^[a-z]+$/) === null) {\n      this.setState({errorMessage: 'Letters only'});\n    } else if (blacklist.has(name)) {\n      this.setState({errorMessage: 'Restricted keyword'});\n    } else {\n      this.setValue('');\n      this.props.onClick(name);\n    }\n  }\n\n  render() {\n    return (\n      <ListItem>\n\t<TextField\n\t  placeholder='Name'\n\t  onChange={event => this.setValue(event.target.value)}\n\t  onKeyDown={(event) => this.handleKeyPress(event)}\n\t  error={this.state.errorMessage !== ''}\n\t  helperText={this.state.errorMessage}\n\t  value={this.state.value}\n\t/>\n\t<Button\n\t  onClick={() => this.handleClick()}\n\t>Add</Button>\n      </ListItem>\n    );\n  }\n}\n\nexport default VariableAdder;\n","function lowerParser(text) {\n\treturn text.toLowerCase();\n}\n\nfunction numberParser(text) {\n\tconst parsed = Number(text);\n\n\tif (!Number.isNaN(parsed)) {\n\t\treturn parsed;\n\t}\n}\n\nconst parsers = {\n\tnumber: numberParser,\n\tlower: lowerParser\n};\nexport default parsers;\n","import React, {PureComponent} from 'react';\nimport ContentEditable from 'react-contenteditable';\n\nimport DEFAULT_PARSERS from './parsers.js';\nimport './EditableValue.css';\n\n\nclass EditableValue extends PureComponent {\n    constructor() {\n        super();\n        this.state = {\n            focused: false,\n            text: ''\n        };\n        this.element = React.createRef();\n    }\n\n    /*** Value Parsing ***/\n    getParser() {\n        if (this.props.parser in DEFAULT_PARSERS) {\n            return DEFAULT_PARSERS[this.props.parser];\n        } else {\n            return this.props.parser;\n        }\n    }\n\n    parsedValue() {\n        return this.getParser()(this.state.text);\n    }\n\n    valid() {\n        return this.parsedValue() !== undefined;\n    }\n\n    // Resets this.state.text to match this.props.value\n    reset() {\n        const propText = this.props.value.toString();\n        if (propText !== this.state.text) {\n            this.setState({text: this.props.value.toString()});\n        }\n    }\n\n\n    /*** Event Handlers ***/\n    componentDidMount() {\n        // Exit on Enter keypress\n        document.addEventListener('keydown', e => {\n            if (e.key === 'Enter' && this.state.focused) {\n                this.element.current.blur();\n            }\n        });\n    }\n\n    handleFocus(e) {\n        this.setState({focused: true});\n        this.reset();\n    }\n\n    handleChange(e) {\n        this.setState({text: e.target.value.toString()});\n    }\n\n    handleBlur(e) {\n        this.setState({focused: false});\n\n        if (this.valid()) {\n            this.props.onChange(this.parsedValue());\n        }\n    }\n\n    componentDidUpdate() {if (!this.state.focused) {this.reset();}}\n\n    render() {\n        const classes = ['editable-value', this.props.name];\n\n        if (this.state.focused) {\n            classes.push('focus')\n            if (!this.valid()) {\n                classes.push('invalid')\n            };\n        }\n\n        const classString = classes.join(' ');\n        const current = this.element.current;\n        if (current !== null) {\n            this.element.current.setAttribute('class', classString);\n        }\n\n        const displayText = this.state.focused ? this.state.text : this.props.value.toString();\n\n        if (this.props.disabled) {\n            return (\n                <span className={classString}>\n                    {displayText}\n                </span>\n            );\n        } else {\n            return (\n                <ContentEditable\n                    html={displayText}\n\n                    onFocus={this.handleFocus.bind(this)}\n                    onChange={this.handleChange.bind(this)}\n                    onBlur={this.handleBlur.bind(this)}\n\n                    className={classString}\n\n                    tagName='span'\n\n                    innerRef={this.element}\n                />\n            );\n        }\n    }\n}\n\nexport default EditableValue;\n","import React, {PureComponent} from 'react';\n\n\nimport BaseSlider from '@material-ui/lab/Slider';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport EditableValue from '../editable-value/EditableValue.js';\n\nimport './Slider.css';\n\n\nclass Slider extends PureComponent {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {min: 0, max: 1};\n\t}\n\n\tsetMin(value) {\n\t\tthis.setState({min: value});\n\t\tthis.clampValue();\n\t}\n\n\tsetMax(value) {\n\t\tthis.setState({max: value});\n\t\tthis.clampValue();\n\t}\n\n\tsetValue(value) {\n\t\tthis.ensureConsistency();\n\t\tthis.props.onChange(value);\n\t}\n\n\t// Clamp this.props.value between min and max.\n\tclampValue() {\n\t\tconst [min, max, value] = [this.state.min, this.state.max, this.props.value];\n\t\tif (value < min) {this.props.onChange(min);}\n\t\tif (value > max) {this.props.onChange(max);}\n\t}\n\n\t// Adjust this.state.min and this.state.max\n\t// if this.props.value is out of bounds.\n\tensureConsistency() {\n\t\tconst [min, max, value] = [this.state.min, this.state.max, this.props.value];\n\t\tif (min > value) {this.setState({min: value});}\n\t\tif (max < value) {this.setState({max: value});}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.ensureConsistency();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.ensureConsistency();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className='slider-base'>\n\t\t\t\t<div className='slider'>\n\t\t\t\t\t\t<div className='info-row'>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\tvalue={this.props.name}\n\t\t\t\t\t\t\t\tparser='lower'\n\t\t\t\t\t\t\t\tonChange={this.props.onNameChange}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span>=</span>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='value'\n\t\t\t\t\t\t\t\tvalue={this.props.value}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setValue.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='main-row'>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='lower-bound'\n\t\t\t\t\t\t\t\tvalue={this.state.min}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setMin.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<BaseSlider\n\t\t\t\t\t\t\t\tclassName='main-slider'\n\t\t\t\t\t\t\t\tmin={this.state.min}\n\t\t\t\t\t\t\t\tmax={this.state.max}\n\t\t\t\t\t\t\t\tvalue={this.props.value}\n\t\t\t\t\t\t\t\tonChange={(e, v) => this.setValue(v)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='upper-bound'\n\t\t\t\t\t\t\t\tvalue={this.state.max}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setMax.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<IconButton onClick={this.props.onDelete} className='delete-icon'>\n\t\t\t\t\t<DeleteIcon/>\n\t\t\t\t</IconButton>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Slider;\n","import React from 'react';\n\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\nimport VariableAdder from './VariableAdder.js';\n\nimport Slider from './slider/Slider.js';\n\nimport './slider-panel.css';\n\n\nconst hiddenVariables = new Set([\n  'log_scale', 'center_x', 'center_y',\n  'enable_checkerboard',\n  'invert_gradient', 'continuous_gradient',\n  'enable_supersampling',\n  'custom_function'\n]);\n\nclass SliderPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.sliders = props.variables;\n    this.textField = React.createRef();\n  }\n\n  handleChange(name, value) {\n    this.sliders[name] = value;\n    this.props.onUpdate(this.sliders);\n    this.forceUpdate();\n  }\n\n  renderSliderList() {\n    let sliderList = [];\n    for (const [name, value] of Object.entries(this.sliders)) {\n      // Skip variables in hidden blacklist\n      if (hiddenVariables.has(name)) {continue;}\n\n      // Return slider component\n      sliderList.push(\n\t<Slider \n\t  key={name}\n\t  name={name}\n\t  value={value}\n\t  onChange={(value) => this.handleChange(name, value)}\n\t  onDelete={() => this.props.onRemove(name)}\n\t/>\n      );\n    }\n\n    return sliderList;\n  }\n\n  render() {\n    return (\n      <List id='variable-list'>\n\t<ListSubheader disableSticky>Variables</ListSubheader>\n\t{this.renderSliderList()}\n\t<VariableAdder\n\t  onClick={name => this.props.onAdd(name, 0.5)}\n\t/>\n      </List>\n    );\n  }\n}\n\nexport default SliderPanel;\n","import React from 'react';\n\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\nclass BooleanOption extends React.PureComponent {\n  render() {\n    const {onClick, checked, label} = this.props;\n    return (\n      <ListItem\n\tbutton\n\tonClick={onClick}\n      >\n\t<Checkbox\n\t  checked={checked}\n\t/>\n\t<ListItemText>{label}</ListItemText>\n      </ListItem>\n    );\n  }\n}\n\nclass OptionsPanel extends React.PureComponent {\n  renderOptions() {\n    const options = [];\n    for (const [variable, label] of Object.entries(this.props.options)) {\n      options.push(\n\t<BooleanOption\n\t  key={variable}\n\t  onClick={() => this.props.onToggle(variable)}\n\t  checked={this.props.variables[variable] > 0.5}\n\t  label={label}\n\t/>\n      );\n    }\n    return options;\n  }\n\n  render() {\n    return (\n      <List id='options-panel'>\n\t<ListSubheader disableSticky>{this.props.heading}</ListSubheader>\n\t{this.renderOptions()}\n      </List>\n    );\n  }\n}\n\nexport default OptionsPanel;\n","import React from 'react';\n\nimport {InlineMath, BlockMath} from 'react-katex';\n\nimport {formatComplex} from '../util';\n\nconst PREFIX = '\\\\int_{\\\\gamma} f(z) \\\\, \\\\mathrm{d}z = ';\n\nexport default ({x, y, style}) => {\nlet contents = <div className='error'>\n    Custom functions are currently unsupported.\n    <style jsx>{`\n        .error {\n            color: hsl(0, 100%, 30%);\n            font-size: 18px;\n            padding: 8px 0;\n        }\n    `}</style>\n</div>;\n\nif (isFinite(x) && isFinite(y)) {\n    if (window.innerWidth < 700) {\n        contents = <div className='math'>\n        <InlineMath>{PREFIX}</InlineMath>\n        <InlineMath>{formatComplex(x, y)}</InlineMath>\n        <style jsx>{`\n            .math {\n                font-size: 16px;\n                color: hsl(213, 10%, 15%);\n\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n\n                margin: 5px 0;\n            }\n        `}</style>\n        </div>;\n    } else {\n        contents = <div className='math'>\n        <BlockMath>{PREFIX + formatComplex(x, y)}</BlockMath>\n        <style jsx>{`\n            .math {\n                margin: -10px 0;\n                font-size: 20px;\n                color: hsl(213, 10%, 15%);\n            }\n        `}</style></div>;\n    }\n}\n\nreturn <div className='container' style={style || {}}>\n    <div className='math'>{contents}</div>\n    <style jsx>{`\n        .container {\n            background-color: white;\n            box-shadow: 3px 3px 8px hsla(213, 10%, 10%, 0.2);\n            border: 1px solid hsl(213, 10%, 85%);\n            border-radius: 8px;\n\n            padding: 0 15px;\n        }\n\n        @media (max-width: 700px) {\n        }\n    `}</style>\n</div>};\n","class Strategy {\n    constructor(mapping, canvas, dpr) {\n        this.mapping = mapping;\n        this.canvas = canvas;\n        this.dpr = dpr;\n\n        this.initialize();\n    }\n\n    initialize() {\n        this.canvas.strokeStyle = 'white';\n        this.canvas.lineWidth = 2 * this.dpr;\n    }\n    \n    update(data) {\n        const {x, y, clientX, clientY} = data;\n        this.integrate(x, y);\n        this.draw(clientX, clientY);\n    }\n\n    finish() {}\n\n    integrate(x, y) {}\n\n    draw(x, y) {}\n\n    value() {\n        return [0, 0];\n    }\n}\n\nexport default Strategy;\n","// 16-point Gaussian quadrature\nconst GAUSS_COEFFICIENTS = [\n    [0.1894506104550685,  0.0950125098376374],\n    [0.1826034150449236,  0.2816035507792589],\n    [0.1691565193950025,  0.4580167776572274],\n    [0.1495959888165767,  0.6178762444026438],\n    [0.1246289712555339,  0.7554044083550030],\n    [0.0951585116824928,  0.8656312023878318],\n    [0.0622535239386479,  0.9445750230732326],\n    [0.0271524594117541,  0.9894009349916499],\n\n    [0.1894506104550685, -0.0950125098376374],\n    [0.1826034150449236, -0.2816035507792589],\n    [0.1691565193950025, -0.4580167776572274],\n    [0.1495959888165767, -0.6178762444026438],\n    [0.1246289712555339, -0.7554044083550030],\n    [0.0951585116824928, -0.8656312023878318],\n    [0.0622535239386479, -0.9445750230732326],\n    [0.0271524594117541, -0.9894009349916499],\n];\n\n// Integrates a function R -> C\n// from start to end via\n// Gaussian quadrature.\nfunction integrateReal(start, end, mapping) {\n    // Reparameterize to [-1, 1]\n    const dx = end - start;\n    const submap = t => mapping(\n        start + 0.5 * dx * (1 + t)\n    );\n\n    // Estimate average value of f over the given interval\n    const result = [0, 0];\n    for (let [weight, abscissa] of GAUSS_COEFFICIENTS) {\n        const [u, v] = submap(abscissa);\n        result[0] += u * dx * weight / 2;\n        result[1] += v * dx * weight / 2;\n    }\n    return result;\n}\n\n// Integrates f(z) dz along the given line segment.\n// Start and end are 2-tuples representing\n// the start and end points in the complex plane.\n// Mapping is a function [x, y] -> [u, v]\n// representing f.\nfunction integrateSegment(start, end, mapping) {\n    const [x0, y0] = start;\n    const [x1, y1] = end;\n\n    // Compute dz\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n\n    // Approximate average value of f(z)\n    // along the segment by Gaussian quadrature\n    const submap = t => mapping([\n        x0 + t * dx,\n        y0 + t * dy,\n    ]);\n    const [u, v] = integrateReal(0, 1, submap);\n\n    return [\n        u * dx - v * dy,\n        v * dx + u * dy,\n    ];\n}\n\nexport {integrateReal, integrateSegment};\n","import Strategy from './Strategy';\n\nimport {isNil} from 'lodash';\n\nimport {integrateSegment} from './util';\n\n\nclass FreeformIntegrator extends Strategy {\n    accumulator = [0, 0];\n\n    lastPoint = null;\n    lastPagePoint = null;\n\n    integrate(x, y) {\n        if (!isNil(this.lastPoint)) {\n            // Integrate along segment between last and current points\n            const df = integrateSegment(this.lastPoint, [x, y], this.mapping);\n            this.accumulator[0] += df[0]\n            this.accumulator[1] += df[1];\n        }\n        this.lastPoint = [x, y];\n    }\n\n    draw(x, y) {\n        if (!isNil(this.lastPagePoint)) {\n            const [lastX, lastY] = this.lastPagePoint;\n            this.canvas.beginPath();\n            this.canvas.moveTo(lastX, lastY);\n            this.canvas.lineTo(x, y);\n            this.canvas.stroke();\n        }\n        this.lastPagePoint = [x, y];\n    }\n\n    value() {\n        return this.accumulator;\n    }\n}\n\nexport default FreeformIntegrator;\n","import React, {PureComponent} from 'react';\n\nimport {isNil} from 'lodash';\n\nimport {pixelToPlot} from '../FunctionPlot';\nimport {toJS} from '../../gl-code/translators';\n\nimport ResultTooltip from './ResultTooltip';\n\nimport FreeformStrategy from './strategies/Freeform';\nimport ClosedFreeformStrategy from './strategies/FreeformClosed';\nimport CircleStrategy from './strategies/Circle';\n\nconst STRATEGY_DICT = {\n    'freeform': FreeformStrategy,\n    'freeform-closed': ClosedFreeformStrategy,\n    'circle': CircleStrategy,\n}\n\nclass IntegralCalculator extends PureComponent {\n    state = {\n        done: false,\n\n        mouseDown: false,\n        mousePosition: null,\n        strategy: null,\n    }\n\n    constructor(props) {\n        super(props);\n\n        // Create canvas ref\n        this.canvas = React.createRef();\n    }\n\n    resizeCanvas() {\n        const canvas = this.canvas.current;\n        const dpr = window.devicePixelRatio;\n        canvas.width = canvas.offsetWidth * dpr;\n        canvas.height = canvas.offsetHeight * dpr;\n    }\n\n\n    // Re-initialized the state if dirty\n    resetState() {\n        const {done} = this.state;\n        if (done) {\n            this.setState({\n                done: false,\n                mousePosition: null,\n                strategy: null,\n           });\n        }\n    }\n\n    handleMouseDown(e) {\n        const {integrator, expression, variables, onClose} = this.props;\n        const {done} = this.state;\n\n        if (done) {\n            // Close if already integrated once\n            onClose();\n        } else {\n            // Compile plotted expression to JS\n            const mapping = toJS(expression, variables);\n\n            // Clear canvas\n            this.resizeCanvas();\n            const context = this.canvas.current.getContext('2d');\n            context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n            // Start integrating\n            this.setState({\n                mouseDown: true,\n                strategy: new STRATEGY_DICT[integrator](\n                    mapping, context, window.devicePixelRatio,\n                ),\n            });\n        }\n    }\n\n    handleMouseMove(e) {\n        const {strategy, mouseDown} = this.state;\n        const {variables} = this.props;\n\n        if (!mouseDown) {return;}\n\n        const {clientX, clientY} = e;\n        const [x, y] = pixelToPlot(clientX, clientY, variables);\n\n        this.setState({mousePosition: [clientX, clientY]});\n\n        if (!isNil(strategy)) {\n            const dpr = window.devicePixelRatio;\n            strategy.update({\n                x, y,\n                clientX: clientX * dpr,\n                clientY: clientY * dpr,\n            });\n        }\n    }\n\n    handleMouseUp(e) {\n        const {strategy} = this.state;\n\n        // Notify integrator\n        strategy.finish();\n\n        // Set finished state\n        this.setState({mouseDown: false, done: true});\n    }\n\n    render() {\n        const {onClose, integrator} = this.props;\n        const {done, mouseDown, mousePosition, strategy} = this.state;\n\n        if (isNil(integrator)) {\n            this.resetState();\n            return null;\n        }\n\n        let tooltip = null;\n        if (!(isNil(strategy) || isNil(mousePosition))) {\n            const [x, y] = strategy.value();\n\n            const snap = x => (Math.abs(x) < 1e-10 ? 0 : x);\n\n            tooltip = <ResultTooltip\n                x={snap(x)} y={snap(y)}\n                style={{\n                    position: 'absolute',\n                    top: mousePosition[1],\n                    left: mousePosition[0] - (window.innerWidth < 700 ? 80 : 0),\n                    zIndex: 3,\n                }}\n            />;\n        }\n\n\n        return <div className='container'\n            onMouseDown={this.handleMouseDown.bind(this)}\n            onMouseMove={this.handleMouseMove.bind(this)}\n            onMouseUp={this.handleMouseUp.bind(this)}\n\n            onTouchStart={this.handleMouseDown.bind(this)}\n            onTouchMove={e => this.handleMouseMove(e.touches[0])}\n            onTouchEnd={this.handleMouseUp.bind(this)}\n        >\n            <canvas\n                ref={this.canvas}\n                className='canvas'\n            />\n            {tooltip}\n            <p className='instructions'>\n                Click and drag to draw a contour\n            </p>\n            <style jsx>{`\n                .container {\n                    position: absolute;\n\n                    top: 0;\n                    bottom: 0;\n                    left: 0;\n                    right: 0;\n\n                    z-index: 15;\n                    cursor: ${done ? 'default' : 'crosshair'};\n\n                    overflow: hidden;\n\n                    background-color: hsla(213, 10%, 10%, 0.6);\n\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                canvas.canvas {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n\n                    width: 100%;\n                    height: 100%;\n                    \n                    z-index: 1;\n                }\n\n                .instructions {\n                    color: hsl(213, 10%, 85%);\n                    font-size: 20px;\n                    text-align: center;\n\n                    margin: 0;\n                    display: ${mouseDown || done ? 'none' : 'block'};\n                    z-index: 2;\n                }\n            `}</style>\n        </div>;\n    }\n}\n\nexport default IntegralCalculator;\n","import Freeform from './Freeform';\n\nimport {isNil} from 'lodash';\n\nclass FreeformClosed extends Freeform {\n    startPoint = null;\n    startPagePoint = null;\n\n    integrate(x, y) {\n        super.integrate(x, y);\n        if (isNil(this.startPoint)) {\n            this.startPoint = [x, y];\n        }\n    }\n\n    draw(x, y) {\n        super.draw(x, y);\n        if (isNil(this.startPagePoint)) {\n            this.startPagePoint = [x, y];\n        }\n    }\n\n    finish() {\n        if (isNil(this.startPoint) || isNil(this.startPagePoint)) {return;}\n\n        // Loop back to start\n        const [x, y] = this.startPoint;\n        const [clientX, clientY] = this.startPagePoint;\n        this.update({\n            x, y,\n            clientX, clientY\n        });\n    }\n}\n\nexport default FreeformClosed;\n","import Strategy from './Strategy';\n\nimport {isNil} from 'lodash';\n\nimport {integrateReal} from './util';\n\n\nclass Circle extends Strategy {\n    center = null;\n    radius = null;\n\n    pageCenter = null;\n    pageRadius = null;\n\n    integrate(x, y) {\n        if (isNil(this.center)) {this.center = [x, y];}\n        this.radius = Math.hypot(x - this.center[0], y - this.center[1]);\n    }\n\n    draw(x, y) {\n        if (isNil(this.pageCenter)) {this.pageCenter = [x, y];}\n        this.pageRadius = Math.hypot(x - this.pageCenter[0], y - this.pageCenter[1]);\n\n        this.canvas.clearRect(0, 0, this.canvas.canvas.width, this.canvas.canvas.height);\n        this.canvas.beginPath();\n        this.canvas.arc(...this.pageCenter, this.pageRadius, 0, 2 * Math.PI);\n        this.canvas.stroke();\n    }\n\n    value() {\n        // Return 0 if not initialized\n        if (isNil(this.center)) {return [0, 0];}\n        const [x, y] = this.center;\n\n        // Parameterize circle and compute pullback of integrand\n        const gamma = theta => [\n            x + this.radius * Math.cos(theta),\n            y + this.radius * Math.sin(theta),\n        ];\n        const gammaPrime = theta => [\n            -this.radius * Math.sin(theta),\n            this.radius * Math.cos(theta),\n        ];\n        const integrand = theta => {\n            const [u, v] = this.mapping(gamma(theta));\n            const [up, vp] = gammaPrime(theta);\n            return [u * up - v * vp, u * vp + v * up];\n        }\n\n        // Divide circle into arcs and integrate along each\n        const N = 32;\n        const scaleFactor = 2 * Math.PI / N;\n        const result = [0, 0];\n        for (let i=0; i < N; i++) {\n            const [u, v] = integrateReal(\n                i * scaleFactor, (i + 1) * scaleFactor, integrand\n            );\n\n            result[0] += u;\n            result[1] += v;\n        }\n\n        return result;\n    }\n}\n\nexport default Circle;\n","import React, {PureComponent} from 'react';\n\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nimport FreeformIcon from '@material-ui/icons/Brush';\nimport ClosedLoopIcon from '@material-ui/icons/SettingsBackupRestore';\nimport CircleIcon from '@material-ui/icons/PanoramaFishEye';\n\n\nconst calculators = [\n    {\n        strategy: 'freeform',\n        label: 'Freeform',\n        icon: <FreeformIcon/>,\n    },\n    {\n        strategy: 'freeform-closed',\n        label: 'Freeform (Closed Loop)',\n        icon: <ClosedLoopIcon/>,\n    },\n    {\n        strategy: 'circle',\n        label: 'Circular Contour',\n        icon: <CircleIcon/>,\n    },\n];\n\nclass IntegralPanel extends PureComponent {\n    renderIntegrator(entry) {\n        const {strategy, label, icon} = entry;\n        const {hidePanels, openCalculator} = this.props;\n\n        const onClick = () => {\n            // Hide panels on mobile\n            if (window.innerWidth < 700) {hidePanels();}\n\n            // Close existing calculator, if present\n            openCalculator(null);\n\n            // Show desired integral calculator\n            // (setTimeout to ensure old calculator closes)\n            setTimeout(() => openCalculator(strategy), 0);\n        };\n\n        return <ListItem button key={strategy} onClick={onClick}>\n            <ListItemIcon>{icon}</ListItemIcon>\n            <ListItemText style={{paddingLeft: 0}}>{label}</ListItemText>\n        </ListItem>;\n    }\n\n    render() {\n        return <List>\n            <ListSubheader disableSticky>Contour Integrals</ListSubheader>\n            {calculators.map(this.renderIntegrator.bind(this))}\n        </List>;\n    }\n}\n\nexport default IntegralPanel;\n","import React from 'react';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\n\nimport './function-editor.css';\n\n\nclass FunctionEditor extends React.PureComponent {\n  handleChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  render() {\n    return (\n      <div id='function-editor'>\n\t<Typography variant='caption'>\n\t  Please read the “Advanced Features” documentation in the right pane before proceeding!\n\t</Typography>\n\t<TextField\n\t  fullWidth\n\t  multiline\n\t  placeholder='vec2 mapping(vec2 z)'\n\t  error={this.props.errorMessage}\n\t  onChange={(event) => this.handleChange(event)}\n\t  defaultValue={this.props.value}\n\t/>\n      </div>\n    );\n  }\n}\n\nexport default FunctionEditor;\n","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport Typography from '@material-ui/core/Typography';\nimport Chip from '@material-ui/core/Chip';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport {constants} from '../../gl-code/parse-expression.js';\n\nimport './help-text.css';\n\n\nconst styles = theme => ({\n  buttonStyle: {\n    ...theme.typography.button\n  },\n  chip: {\n    margin: 3\n  }\n});\n\nconst supportedFunctions = [\n  {\n    name: 'Operators',\n    entries: ['+', '-', '*', '/', '^', '!']\n  },\n  {\n    name: 'Trigonometry',\n    entries: [\n      'sin', 'cos', 'tan', 'sec', 'csc', 'cot',\n      'arcsin', 'arccos', 'arctan', 'arcsec', 'arccsc', 'arccot',\n      'sinh', 'cosh', 'tanh', 'sech', 'csch', 'coth',\n      'arsinh', 'arcosh', 'artanh', 'arsech', 'arcsch', 'arcoth'\n    ]\n  },\n  {\n    name: 'Exponential',\n    entries: ['exp', 'log', 'ln']\n  },\n  {\n    name: 'Constants',\n    entries: Array.from(constants)\n  },\n  {\n    name: 'Miscellaneous',\n    entries: [\n      'sqrt',\n      'gamma', 'eta', 'zeta',\n      'abs', 'arg', 'conj', 'cis',\n      'real', 'imag',\n    ]\n  }\n];\n\nclass HelpText extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n  }\n\n  renderChips(entries) {\n    return entries.map(label =>\n      <Chip \n\tkey={label}\n\tlabel={label}\n\tclassName={this.classes.chip}\n      />\n    );\n  }\n  \n  renderSupportedFunctions() {\n    const sections = []\n    for (const section of supportedFunctions) {\n      sections.push(\n\t<div key={section.name}>\n\t  <h3>{section.name}</h3>\n\t  {this.renderChips(section.entries)}\n\t</div>\n      );\n    }\n    return sections;\n  }\n\n  render() {\n    return (\n      <div id='help-text'>\n\t<h1>\n                <img src='android-chrome-192x192.png' className='logo' alt='logo'/>\n                <div className='text'>\n                    Complex Function Plotter\n                    <div className='subtitle'>\n                        Made with {'<3'} by Samuel J. Li\n                    </div>\n                </div>\n        </h1>\n\n\t<h2>Introduction</h2>\n\t<p>Creates interactive, domain-colored plots of complex functions.</p>\n\t<p>Each point on the complex plane is colored according to the value of the function at that point.\n\tHue and brightness are used to display phase and magnitude, respectively.</p>\n\t<p>To increase the displayable range of values, brightness cycles from dark to light repeatedly with magnitude, jumping at every power of two.\n\tThe “edges” of regions with different brightness correspond to curves along which the function has constant magnitude.\n\t</p>\n\t<p>This method allows for quick visualization of the locations and orders of any poles and zeros.\n\tFor more information, see the <a href='https://en.wikipedia.org/wiki/Domain_coloring'>Wikipedia article on domain coloring.</a></p>\n\n\t<h2>Controls</h2>\n\t<p>To plot a complex function, enter its expression in the top bar. Parentheses (curved or square), complex number literals, and arbitrary variables (see “Variables” below) are supported. Input is case-insensitive.</p>\n\t<p>A red underline will appear if the expression cannot be plotted. You might have made a syntax error or forgot to declare a variable.</p>\n\t<p>Drag the plot to pan, and use the scroll wheel to zoom in and out.</p>\n\n\t<h2>Supported Functions</h2>\n\t<div className='help-indent'>\n\t  {this.renderSupportedFunctions()}\n\t</div>\n\n\t<h2>Variables</h2>\n\t<p>Expressions can contain arbitrary user-defined variables.</p>\n\t<p>\n\tClick on the <MenuIcon style={{fontSize: 20}}/> icon in the upper-left corner to open the variables panel.\n\tVariables can be added with the <span className={this.classes.buttonStyle}>Add</span> button and removed with the <DeleteIcon style={{fontSize: 20}}/> button.</p>\n\n\t<p>\n\tClick on the variable’s current value or the slider’s upper & lower bounds to edit them.\n\t</p>\n\t\n\t<p>Any string of lowercase letters can be used as a variable name, except for reserved functions, the built-in variable <i>z</i>, and the constant <i>i</i>.</p>\n\n\t<h2>Contour Integrals</h2>\n\t<p>The calculator is able to compute arbitrary contour integrals and residues. The following options\n        are available under the ‘Contour Integral’ section of the left pane:</p>\n\t\n\t<div className='help-indent'>\n\t  <h3>Freeform</h3>\n\t  <p>After selecting this option, click and drag to draw an arbitrary contour. The integral of the currently plotted function along the given contour will be displayed.</p>\n\n\t  <h3>Freeform (Closed Loop)</h3>\n\t  <p>Same as ‘Freeform,’ except that the contour is closed with a line segment connecting the start and end points after it is drawn.</p>\n\n\t  <h3>Circular Contour</h3>\n\t  <p>After selecting this option, click and drag to draw a circular contour. The integral of the currently plotted function along the given circle (with counterclockwise orientation) will be displayed.</p>\n\t</div>\n\n        <p>Note that custom functions and some of the more intricate built-in functions are not yet supported.\n        The computed values are generally accurate to within one part in a trillion unless the function is highly pathological.</p>\n\n\n\t<h2>Graphics Options</h2>\n\t<p>The following options can be found below the variables panel:</p>\n\t\n\t<div className='help-indent'>\n\t  <h3>Enable Checkerboard</h3>\n\t  <p>Overlays a checkerboard with eight squares per unit length, colored according to the real and imaginary parts of the function’s value.</p>\n\n\t  <h3>Invert Gradient</h3>\n\t  <p>Reverses the direction of the magnitude gradient. When the gradient is inverted, the apparent height of the “layers” formed correlate with the magnitude of the function.</p>\n\n\t  <h3>Continuous Gradient</h3>\n\t  <p>Use a continuous magnitude gradient rather than the “stepped” default. Reduces the range of visually discernible magnitudes, but removes shading artifacts in certain situations.</p>\n\t</div>\n\n\t<h2>Tips</h2>\n\t<p>To share a graph, just copy and paste the URL! The address automatically changes to reflect the plotted expression.</p>\n\n\t<h2>Advanced Features</h2>\n\t<ExpansionPanel style={{margin: '0 -5px'}}>\n\t  <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\n\t    <Typography variant='caption'>\n\t      Please read thoroughly iff you are using advanced options.\n\t    </Typography>\n\t  </ExpansionPanelSummary>\n\t  <ExpansionPanelDetails>\n\t    <div>\n\t      <h3>Custom Functions</h3>\n\t      <p>This option can be found under the “Advanced Options” heading in the left pane. Overrides the main expression bar, allowing you to code your own function.</p>\n\t      <p>Custom functions use the <a href='https://en.wikipedia.org/wiki/OpenGL_Shading_Language'>GLSL</a> programming language. If you've never worked with GLSL before, it's extremely similar to C. Here are a few tips and caveats:</p>\n\t      <ul>\n\t\t<li>Complex numbers are represented by the <tt>vec2</tt> type, which represents a 2D vector. The real part can be accessed through <tt>z.x</tt> and the imaginary part by <tt>z.y</tt>.</li>\n\t\t<li>Your custom function should be named <tt>mapping</tt>, and should take one input of type <tt>vec2</tt> and return an output of type <tt>vec2</tt>.</li>\n\t\t<li>Complex number literals <i>a+bi</i> should be entered as <tt>vec2(a, b)</tt>, even if they are real. GLSL doesn’t support addition or subtraction between the “complex” <tt>vec2</tt> type and floats. Scalar multiplication should work fine with floats, however. For convenience, there are constants <tt>ONE</tt> and <tt>I</tt> available.</li>\n\t\t<li>Addition and subtraction operators (<tt>+</tt> and <tt>-</tt>) work fine between <tt>vec2</tt> complex numbers. However, multiplication, division, and exponentiation operators act component-wise on the real and imaginary parts, which is probably not what you want. There are <tt>cmul</tt>, <tt>cdiv</tt>, and <tt>cpow</tt> functions available which will perform the proper complex operation.</li>\n\t\t<li>All supported functions are available, but with a <tt>c</tt> prefix. For example, the sin function is named <tt>csin</tt>. This is to avoid clashing with the built-in (real-valued) GLSL functions.</li>\n\t\t<li>Constants are available in uppercase with a <tt>C_</tt> prefix (e.g. <tt>C_PI</tt>), and are already in complex <tt>vec2</tt> form.</li>\n\t      </ul>\n\t      \n\t      <h3>Limitations</h3>\n\t      <p>There are currently a few limitations with the custom function feature which I hope to resolve soon:</p>\n\t      <ul>\n\t\t<li>URL-based sharing doesn’t currently work for custom functions. You may share the code directly instead.</li>\n\t\t<li>The editor will show a red underline if your code fails to compile, but currently does not show useful error information. For now, this information is visible in the developer console.</li>\n\t      </ul>\n\n\t      <h3>Tips</h3>\n\t      <p>Most desktop browsers will display a small resize handle at the bottom-right corner of the left pane. This can be very useful when working on complex code.</p>\n\t      <p>You can define arbitrary helper functions before your <tt>mapping</tt> function — you have the full power of GLSL!</p>\n\n\t      <p><b>You can use all your declared variables</b> directly in your code! They’ve already been converted into complex <tt>vec2</tt> form.</p>\n\t      \n\t      <h3>Obligatory Warning</h3>\n\t      <p>This is an advanced feature — you may break things! If anything freezes or crashes, a quick reload should resolve the issue (save your code first)!</p>\n\t    </div>\n\t  </ExpansionPanelDetails>\n\t</ExpansionPanel>\n\n\t<h2>Acknowledgements</h2>\n\t<p>Inspired by David Bau’s <a href='http://davidbau.com/conformal'>Conformal Map Plotter</a>.</p>\n\n\t<Typography variant='caption'>Complex Function Plotter — Made with love by Samuel J. Li</Typography>\n\t<Typography variant='caption'>Found a bug? — bug.report@samuelj.li</Typography>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(HelpText);\n","import React from 'react';\nimport './App.css';\nimport 'katex/dist/katex.min.css';\n\nimport {isNil} from 'lodash';\n\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport theme from './theme.js';\n\nimport ControlBar from './components/ControlBar/ControlBar.js';\nimport FunctionPlot from './components/FunctionPlot';\n\nimport SidePanel from './components/SidePanel/SidePanel.js';\nimport './components/control-panel.css';\n\nimport SliderPanel from './components/SliderPanel/SliderPanel.js';\nimport OptionsPanel from './components/OptionsPanel/OptionsPanel.js';\n\nimport IntegralCalculator from './components/IntegralCalculator';\nimport IntegralPanel from './components/IntegralCalculator/IntegralPanel';\n\nimport FunctionEditor from './components/FunctionEditor/FunctionEditor.js';\n\nimport HelpText from './components/HelpText/HelpText.js';\n\nimport {parseExpression} from './gl-code/complex-functions';\n\n\nconst defaultShader = `vec2 mapping(vec2 z) {\n  vec2 c = z;\n  for (int i=0; i<64; i++) {\n    z = cmul(z, z) + c;\n  }\n  return z;\n}`;\n\nclass App extends React.Component {\n  state = {\n    expressionText: 'z',\n    expression: ['variable', 'z'],\n    expressionError: false,\n\n    customShader: defaultShader,\n    shaderError: false,\n\n    menuOpen: false,\n    helpOpen: false,\n\n    integrationStrategy: null,\n\n    variables: {\n      log_scale: 5,\n      center_x: 0,\n      center_y: 0,\n      t: 0.3,\n      enable_checkerboard: 1,\n      invert_gradient: 0,\n      continuous_gradient: 0,\n      custom_function: 0,\n      enable_supersampling: (window.innerWidth > 800) ? 1 : 0,\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', this.handleHashChange.bind(this));\n\n    document.addEventListener(\n      'gesturestart',\n      (event) => this.preventDefault(event),\n      {passive: false}\n    );\n    document.addEventListener(\n      'touchmove',\n      (event) => this.preventDefault(event),\n      {passive: false}\n    );\n\n    this.handleHashChange();\n  }\n\n  preventDefault(event) {\n    const tagName = event.target.tagName.toLowerCase();\n    if (tagName === 'canvas') {\n      event.preventDefault();\n    } else {\n      return event;\n    }\n  }\n\n  // Toolbar buttons\n  handleMenuButton() {\n    this.setState({menuOpen: !this.state.menuOpen});\n  }\n\n  handleHelpButton() {\n    this.setState({helpOpen: !this.state.helpOpen});\n  }\n\n  // Variable Sliders\n  handleVariableUpdate(variables) {\n    this.state.variables = variables;\n    this.refs.plot.handleVariableUpdate(variables);\n  }\n\n  handleVariableAdd(name, value) {\n    const variables = this.state.variables;\n    variables[name] = value;\n    this.setState({variables: variables});\n  }\n\n  handleVariableRemove(name) {\n    const variables = this.state.variables;\n    delete variables[name];\n    this.setState({variables: variables});\n  }\n\n  handleOptionToggle(name) {\n    const variables = this.state.variables;\n    variables[name] = (variables[name] < 0.5) ? 1 : 0;\n    this.setState({variables: variables});\n  }\n\n  setErrorMessage(message) {\n    const {variables, expressionError, shaderError} = this.state;\n\n    if (variables.custom_function > 0.5) {\n      if (message !== shaderError) {\n\tthis.setState({shaderError: message});\n      }\n    } else {\n      if (message !== expressionError) {\n\tthis.setState({expressionError: message});\n      }\n    }\n  }\n\n  handleHashChange() {\n    const hash = window.location.hash;\n    if (hash === '') {\n      return;\n    } else {\n      this.setExpression(decodeURIComponent(hash.slice(1)));\n    }\n  }\n\n  setExpression(text) {\n    text = text.toLowerCase();\n\n    window.history.replaceState(\n      undefined, undefined,\n      '#' + encodeURIComponent(text)\n    );\n\n    this.setState({\n        expressionText: text,\n        expression: parseExpression(text),\n        integrationStrategy: null,\n    });\n  }\n\n  setCustomShader(text) {\n    this.setState({customShader: text});\n  }\n\n  renderFunctionEditor() {\n    const {variables, customShader, shaderError} = this.state;\n    if (variables.custom_function > 0.5) {\n      return (\n\t<FunctionEditor\n\t  onChange={this.setCustomShader}\n\t  errorMessage={shaderError}\n\t  value={customShader}\n\t/>\n      );\n    } else {\n      return; \n    }\n  }\n\n  render() {\n    const {\n        variables,\n        customShader,\n        expression, expressionText,\n        menuOpen, helpOpen,\n        expressionError,\n        integrationStrategy,\n    } = this.state;\n\n    const useCustomShader = variables.custom_function > 0.5;\n\n    const ast = useCustomShader ? customShader : expression;\n\n    return (\n      <MuiThemeProvider theme={theme}>\n\t<div id='app'>\n\t  <ControlBar\n\t    menuOpen={menuOpen}\n\t    helpOpen={helpOpen}\n\t    onMenuButton={this.handleMenuButton.bind(this)}\n\t    onHelpButton={this.handleHelpButton.bind(this)}\n\n\t    onChange={this.setExpression.bind(this)}\n\t    value={expressionText}\n\t    error={expressionError}\n\t  />\n\t  <SidePanel\n\t    className='control-panel'\n\t    open={menuOpen} \n\t    onToggle={this.handleMenuButton.bind(this)}\n\t    anchor='left'\n\t    transitionWidth={480}\n\t  >\n\t    <SliderPanel\n\t      variables={variables}\n\t      onUpdate={this.handleVariableUpdate.bind(this)}\n\t      onAdd={this.handleVariableAdd.bind(this)}\n\t      onRemove={this.handleVariableRemove.bind(this)}\n\t    />\n            <IntegralPanel\n              variables={variables}\n              hidePanels={() => this.setState({helpOpen: false, menuOpen: false})}\n              openCalculator={integrationStrategy => this.setState({integrationStrategy})}\n            />\n\t    <OptionsPanel\n\t      heading='Graphics Options'\n\t      options={{\n\t\tenable_checkerboard: 'Enable Checkerboard',\n\t\tinvert_gradient: 'Invert Gradient',\n\t\tcontinuous_gradient: 'Continuous Gradient',\n\t      }}\n\t      onToggle={this.handleOptionToggle.bind(this)}\n\t      variables={variables}\n\t    />\n\t    <OptionsPanel\n\t      heading='Advanced Options'\n\t      options={{\n\t\tcustom_function: 'Custom Function'\n\t      }}\n\t      onToggle={this.handleOptionToggle.bind(this)}\n\t      variables={variables}\n\t    />\n\t    {this.renderFunctionEditor()}\n\t  </SidePanel>\n          <IntegralCalculator\n              expression={ast}\n              variables={variables}\n              integrator={integrationStrategy}\n              onClose={() => this.setState({integrationStrategy: null})}\n          />\n\t  <FunctionPlot\n\t    ref='plot'\n\t    expression={ast}\n\t    variables={variables}\n\t    onError={this.setErrorMessage.bind(this)}\n\t  />\n\t  <SidePanel\n\t    className='help-panel'\n\t    open={helpOpen}\n\t    anchor='right'\n\t    onToggle={this.handleHelpButton.bind(this)}\n\t    transitionWidth={900}\n\t  >\n\t    <HelpText/>\n\t  </SidePanel>\n\t</div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'babel-polyfill';\n\nimport React from 'react';\nimport {render} from 'react-snapshot';\n\nimport './index.css';\n\nimport App from './App';\nimport {unregister} from './registerServiceWorker';\n\n\nrender(<App />, document.getElementById('root'));\n//registerServiceWorker();\nunregister();\n"],"sourceRoot":""}