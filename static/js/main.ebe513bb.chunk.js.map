{"version":3,"sources":["theme.js","components/ControlBar/ControlBar.js","gl-code/parse-expression.js","gl-code/complex-functions.js","gl-code/shaders.js","gl-code/scene.js","components/FunctionPlot/FunctionPlot.js","components/SidePanel/SidePanel.js","components/SliderPanel/VariableSlider.js","gl-code/function-list.js","components/SliderPanel/VariableAdder.js","components/SliderPanel/editable-value/parsers.js","components/SliderPanel/editable-value/EditableValue.js","components/SliderPanel/slider/Slider.js","components/SliderPanel/SliderPanel.js","components/OptionsPanel/OptionsPanel.js","components/FunctionEditor/FunctionEditor.js","components/HelpText/HelpText.js","App.js","registerServiceWorker.js","index.js"],"names":["theme","createMuiTheme","palette","primary","blue","ControlPanel","event","this","props","onChange","target","value","_this","react_default","a","createElement","AppBar_default","id","Toolbar_default","disableGutters","IconButton_default","onClick","onMenuButton","Menu_default","TextField_default","placeholder","handleTextChange","error","autoFocus","fullWidth","Button_default","onHelpButton","React","PureComponent","symbols","Set","functions","constants","operators","+","-","*","/","^","!","matchRegex","expression","regex","match","token_parsers","type","text","lastToken","char","charAt","precedence","left_associative","has","hasOwnProperty","_operators$text","Object","slicedToArray","REMAP","pi","tau","e","phi","parseExpression","tokens","length","found","trim","_i","_token_parsers","token","parser","slice","push","console","log","concat","tokenize","replace","operator_stack","output","reverse","pop","operator","stop","argument_names","ComplexFunction","name","body","num_args","classCallCheck","undefined","_len","arguments","parameters","Array","_key","join","types","fill","i","mul_i","reciprocal","cconj","cabs","carg","ccis","cexp","clog","csqrt","csquare","csin","ccos","ctan","csec","ccsc","ccot","carcsin","carccos","carctan","carccot","carcsec","carccsc","csinh","ccosh","ctanh","csech","ccsch","ccoth","carsinh","carcosh","cartanh","carsech","carcsch","carcoth","cneg","cadd","csub","cmul","cdiv","cpow","cgamma","cgamma_left","cgamma_right","cfact","ceta","complex_functions","ceta_left","ceta_right","square","conj","abs","arg","cis","exp","ln","sqrt","sin","cos","tan","sec","csc","cot","arcsin","arccos","arctan","arcsec","arccsc","arccot","sinh","cosh","tanh","sech","csch","coth","arsinh","arcosh","artanh","arsech","arcsch","arcoth","$","gamma","eta","zeta","declarations","values","map","f","declaration","definitions","code","declarationString","from","definitionString","functionDefinitions","loadShader","gl","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createShaderProgram","customShader","variableNames","fragmentShaderSource","width","height","x_offset","toFixed","y_offset","dpr","window","devicePixelRatio","variableDeclarations","custom_code","glsl_expression","stack","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","magnitude","parseFloat","toString","indexOf","endsWith","arity","apply","err","return","translateExpression","getFragmentShaderSource","drawingBufferWidth","drawingBufferHeight","vertexShader","VERTEX_SHADER","vertexShaderSource","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","initializeScene","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","initBuffers","useProgram","positionLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","variableLocations","getUniformLocation","FunctionPlot","possibleConstructorReturn","getPrototypeOf","call","variables","initialized","mouseDown","canvasSize","position","addEventListener","componentDidUpdate","bind","initializeWebGL","initializePlot","updatePlot","onError","x","y","scale","Math","log_scale","offset_x","center_x","offset_y","center_y","plot_x","plot_y","mouseEvent","nativeEvent","targetTouches","touches","pageX","pageY","_ref","x0","y0","_ref2","x1","y1","hypot","getPosition","wheelEvent","deltaLogScale","_this$pixelToPlot","pixelToPlot","_this$pixelToPlot2","mouse_plotx","mouse_ploty","deltaY","_this$pixelToPlot3","_this$pixelToPlot4","x_shift","y_shift","updatePosition","_this$getPosition","_this$getPosition2","logDistance","deltaPosition","handleZoom","handleMouseDown","handleMouseMove","handleMouseUp","_Object$entries","entries","_ref5","_ref4","canvas","refs","getContext","antialiasing","offsetWidth","offsetHeight","viewport","custom_function","keys","variableAssignments","_i2","_Object$entries2","_ref8","_ref7","_Object$values","_ref3","location","uniform2f","drawArrays","TRIANGLES","drawScene","_this2","ref","onMouseDown","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onTouchStart","handleTouchStart","onTouchMove","handleTouchMove","onTouchEnd","handleTouchEnd","onWheel","SidePanel","classes","state","updateWidth","setState","innerWidth","transitionWidth","Drawer_default","anchor","open","variant","paper","className","toolbar","children","SwipeableDrawer_default","onOpen","onToggle","onClose","disableDiscovery","disableSwipeToOpen","withStyles","mixins","VariableSlider","ListItem_default","Typography_default","Slider_default","root","variableSlider","min","max","ListItemSecondaryAction_default","onDelete","Delete_default","paddingLeft","paddingRight","restrictedFunctions","toConsumableArray","blacklist","VariableAdder","errorMessage","keyCode","handleClick","toLowerCase","setValue","onKeyDown","handleKeyPress","helperText","parsers","number","parsed","Number","isNaN","lower","EditableValue","focused","element","createRef","DEFAULT_PARSERS","getParser","parsedValue","document","key","current","blur","reset","valid","classString","setAttribute","displayText","disabled","react_contenteditable_default","html","onFocus","handleFocus","handleChange","onBlur","handleBlur","tagName","innerRef","Slider","clampValue","ensureConsistency","SliderPanel_editable_value_EditableValue","onNameChange","setMin","v","setMax","hiddenVariables","SliderPanel","sliders","textField","onUpdate","forceUpdate","sliderList","_loop","SliderPanel_slider_Slider","onRemove","_this3","List_default","ListSubheader_default","disableSticky","renderSliderList","SliderPanel_VariableAdder","onAdd","Component","BooleanOption","button","Checkbox_default","checked","ListItemText_default","label","OptionsPanel","options","variable","OptionsPanel_BooleanOption","heading","renderOptions","FunctionEditor","multiline","defaultValue","supportedFunctions","HelpText","Chip_default","chip","sections","_supportedFunctions","section","renderChips","href","renderSupportedFunctions","style","fontSize","buttonStyle","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","objectSpread","typography","margin","defaultShader","App","expressionError","shaderError","menuOpen","helpOpen","t","enable_checkerboard","invert_gradient","continuous_gradient","handleHashChange","preventDefault","passive","plot","handleVariableUpdate","message","hash","setExpression","decodeURIComponent","history","replaceState","encodeURIComponent","components_FunctionEditor_FunctionEditor","setCustomShader","_this4","MuiThemeProvider_default","ControlBar","handleMenuButton","handleHelpButton","components_SidePanel_SidePanel","components_SliderPanel_SliderPanel","handleVariableAdd","handleVariableRemove","components_OptionsPanel_OptionsPanel","handleOptionToggle","renderFunctionEditor","components_FunctionPlot_FunctionPlot","setErrorMessage","components_HelpText_HelpText","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","render","src_App_0","getElementById","URL","process","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.ebe513bb.chunk.js","sourcesContent":["import createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport blue from '@material-ui/core/colors/blue';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue,\n  },\n});\n\nexport default theme;\n","import React from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport './control-bar.css';\n\n\nclass ControlPanel extends React.PureComponent {\n  handleTextChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  render() {\n    return (\n      <AppBar id='app-bar'>\n\t<Toolbar disableGutters>\n\t  <IconButton\n\t    onClick={this.props.onMenuButton}\n\t  >\n\t    <MenuIcon/>\n\t  </IconButton>\n\t  <div id='function-input'>\n\t    <TextField\n\t      id='function-input'\n\t      placeholder='Enter a complex function of z'\n\t      value={this.props.value}\n\t      onChange={(event) => this.handleTextChange(event)}\n\t      error={this.props.error}\n\t      autoFocus\n\t      fullWidth\n\t    />\n\t  </div>\n\t  <div id='help-button'>\n\t    <Button\n\t      onClick={this.props.onHelpButton}\n\t    >\n\t      Help\n\t    </Button>\n\t  </div>\n\t</Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nexport default ControlPanel;\n","const symbols = new Set([\n\t'(', ')', '[', ']',\n\t'+', '*', '-', '/',\n\t'^', '!']);\nconst functions = new Set([\n\t'sin', 'cos', 'tan', 'sec', 'csc', 'cot',\n\t'arcsin', 'arccos', 'arctan', 'arcsec', 'arccsc', 'arccot',\n\t'sinh', 'cosh', 'tanh', 'sech', 'csch', 'coth',\n\t'arsinh', 'arcosh', 'artanh', 'arsech', 'arcsch', 'arcoth',\n\t'exp', 'log', 'ln',\n\t'sqrt', 'gamma', 'eta', 'zeta',\n\t'abs', 'arg',\n\t'conj', 'cis'\n]);\nconst constants = new Set([\n\t'e', 'pi', 'tau', 'phi'\n]);\n\nconst operators = {\n\t'+': [0, true],\n\t'-': [0, true],\n\t'*': [1, true],\n\t'/': [1, true],\n\t'^': [2, false],\n\t'!': [3, false],\n}\n\nfunction symbolParser(expression, lastToken) {\n\tlet char = expression.charAt();\n\tlet type = 'operator';\n\tlet text = null;\n\tlet precedence = null;\n\tlet left_associative = null;\n\n\tif (symbols.has(char)) {text = char;}\n\n\tif (text === '(' || text === '[') {type = 'left-bracket';}\n\tif (text === ')' || text === ']') {type = 'right-bracket';}\n\tif (operators.hasOwnProperty(text)) {\n\t\t[precedence, left_associative] = operators[text];\n\t}\n\n\t// Unary minus\n\tif (text === '-' && (\n\t\tlastToken === null\n\t\t|| lastToken.type === 'operator'\n\t\t|| lastToken.type === 'left-bracket')) {\n\t\ttext = '$';\n\t\tprecedence = 3;\n\t\tleft_associative = false;\n\t}\n\n\treturn {\n\t\ttype: type,\n\t\ttext: text,\n\t\tprecedence: precedence,\n\t\tleft_associative: left_associative\n\t};\n}\n\nfunction matchRegex(expression, regex) {\n\tconst match = expression.match(regex);\n\tif (match === null) {\n\t\treturn null;\n\t} else {\n\t\treturn match[0];\n\t}\n}\n\nfunction numberParser(expression) {\n\treturn {\n\t\ttype: 'number',\n\t\ttext: matchRegex(expression, /^(([0-9]+(\\.[0-9]+)?i?)|i)/)\n\t};\n}\n\nfunction wordParser(expression) {\n\tlet type = 'variable';\n\tconst text = matchRegex(expression, /^[a-z]+/);\n\n\tif (functions.has(text)) {type = 'function';}\n\n\treturn {\n\t\ttype: type,\n\t\ttext: text\n\t}\n}\n\nconst token_parsers = [\n\tnumberParser,\n\tsymbolParser,\n\twordParser\n];\n\n// END PARSERS //\n\n\nconst REMAP = {\n\t'pi': 'C_PI',\n\t'tau': 'C_TAU',\n\t'e': 'C_E',\n\t'phi': 'C_PHI'\n};\nfunction tokenize(expression) {\n\tconst tokens = [];\n\tlet lastToken = null;\n\n\twhile (expression.length > 0) {\n\t\tlet found = false;\n\t\texpression = expression.trim();\n\n\t\t// Loop through each parser and attempt to parse a token\n\t\tfor (const parser of token_parsers) {\n\t\t\tlet token = parser(expression, lastToken);\n\n\t\t\t// If parse is successful, extract token and restart parsing\n\t\t\tif (token.text !== null) {\n\t\t\t\t// console.log('Token', token);\n\t\t\t\texpression = expression.slice(token.text.length);\n\t\t\t\tif (REMAP.hasOwnProperty(token.text)) {\n\t\t\t\t\ttoken.text = REMAP[token.text];\n\t\t\t\t}\n\t\t\t\ttokens.push(token);\n\t\t\t\tlastToken = token;\n\t\t\t\tfound = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!found) {\n\t\t\tconsole.log(`Error parsing token from ${expression}`);\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn tokens\n}\n\nfunction parseExpression(expression) {\n\texpression = expression.replace(/\\*\\*/g, '^');\n\tconst tokens = tokenize(expression);\n\tconst operator_stack = [];\n\tconst output = [];\n\n\t// Return null on tokenization error\n\tif (tokens === null) {return null;}\n\n\n\t// Shunting yard algorithm\n\ttokens.reverse();\n\twhile (tokens.length > 0) {\n\t\tlet token = tokens.pop();\n\n\t\tswitch (token.type) {\n\t\t\tcase 'number':\n\t\t\t\toutput.push(token);\n\t\t\t\tbreak;\n\n\t\t\tcase 'variable':\n\t\t\t\toutput.push(token);\n\t\t\t\tbreak;\n\n\t\t\tcase 'function':\n\t\t\t\toperator_stack.push(token)\n\t\t\t\tbreak;\n\n\t\t\tcase 'operator':\n\t\t\t\twhile (operator_stack.length > 0) {\n\t\t\t\t\tlet operator = operator_stack.pop();\n\t\t\t\t\tlet stop = true;\n\n\t\t\t\t\tif (operator.type === 'function') {\n\t\t\t\t\t\tstop = false;\n\t\t\t\t\t} else if (operator.type === 'operator') {\n\t\t\t\t\t\tif (operator.precedence > token.precedence) {\n\t\t\t\t\t\t\tstop = false;\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\toperator.precedence === token.precedence\n\t\t\t\t\t\t\t&& operator.left_associative) {\n\t\t\t\t\t\t\tstop = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (stop) {\n\t\t\t\t\t\toperator_stack.push(operator);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput.push(operator);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toperator_stack.push(token);\n\t\t\t\tbreak;\n\n\t\t\tcase 'left-bracket':\n\t\t\t\toperator_stack.push(token);\n\t\t\t\tbreak;\n\n\t\t\tcase 'right-bracket':\n\t\t\t\tlet found = false;\n\t\t\t\twhile (operator_stack.length > 0) {\n\t\t\t\t\tlet operator = operator_stack.pop();\n\t\t\t\t\tif (operator.type !== 'left-bracket') {\n\t\t\t\t\t\toutput.push(operator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfound = true\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!found) {\n\t\t\t\t\tconsole.log('Mismatched parentheses!');\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.log(`Unknown token type ${token.type}!`);\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\twhile (operator_stack.length > 0) {\n\t\tlet operator = operator_stack.pop();\n\t\tif (operator.type === 'left-bracket' || operator.type === 'right-bracket') {\n\t\t\tconsole.log('Mismatched parentheses!');\n\t\t\treturn null;\n\t\t}\n\t\toutput.push(operator);\n\t}\n\n\t// console.log('RPN:', output.map(x => x.text).join(' '));\n\treturn output;\n}\n\nexport {parseExpression, functions, constants};\n","import {parseExpression} from './parse-expression.js';\n\n\nconst argument_names = ['z', 'w'];\n\nclass ComplexFunction {\n\tconstructor(name, body, num_args) {\n\t\tif (num_args === undefined) {num_args = 1}\n\n\t\tthis.name = name;\n\t\tthis.body = body;\n\t\tthis.num_args = num_args;\n\t}\n\n\tapply(...parameters) {\n\t\treturn `${this.name}(${parameters.join(', ')})`;\n\t}\n\n\tget declaration() {\n\t\tlet types = Array(this.num_args);\n\t\ttypes.fill('vec2');\n\t\treturn `vec2 ${this.name}(${types.join(', ')});`\n\t}\n\n\tget code() {\n\t\tlet parameters = [];\n\t\tfor (let i = 0; i < this.num_args; i++) {\n\t\t\tparameters.push(`vec2 ${argument_names[i]}`);\n\t\t}\n\t\treturn `vec2 ${this.name}(${parameters.join(', ')}) {\n\t\t\t${this.body}\n\t\t}`\n\t}\n}\n\n\n// DEFINITIONS //\n\n// Miscellaneous\nconst mul_i = new ComplexFunction('mul_i', 'return vec2(-z.y, z.x);');\nconst reciprocal = new ComplexFunction('reciprocal', `\n\tfloat magnitude = length(z);\n\treturn cconj(z) / (magnitude * magnitude);`);\nconst cconj = new ComplexFunction('cconj', 'return vec2(z.x, -z.y);');\nconst cabs = new ComplexFunction('cabs', 'return vec2(length(z), 0);');\nconst carg = new ComplexFunction('carg', 'return vec2(atan(z.y, z.x), 0);');\n\n// Exponentials\nconst ccis = new ComplexFunction('ccis', 'return cexp(mul_i(z));');\nconst cexp = new ComplexFunction('cexp', `\n\tfloat magnitude = exp(z.x);\n\tfloat phase = z.y;\n\treturn vec2(magnitude*cos(phase), magnitude*sin(phase));\n\t`);\nconst clog = new ComplexFunction('clog', `\n\tfloat magnitude = log(length(z));\n\tfloat phase = atan(z.y, z.x);\n\treturn vec2(magnitude, phase);\n\t`);\nconst csqrt = new ComplexFunction('csqrt', `\n\tfloat magnitude = length(z);\n\tfloat phase = atan(z.y, z.x) / 2.0;\n\treturn sqrt(magnitude) * vec2(cos(phase), sin(phase));\n\t`);\nconst csquare = new ComplexFunction('csquare', `\n\tfloat magnitude = length(z);\n\tfloat phase = atan(z.y, z.x) * 2.0;\n\treturn (magnitude * magnitude) * vec2(cos(phase), sin(phase));\n\t`);\n\n// Trigonometry //\n// Basic Trigonometric Functions\nconst csin = new ComplexFunction('csin', `\n\tvec2 iz = mul_i(z);\n\treturn -0.5 * mul_i(cexp(iz) - cexp(-iz));\n\t`);\nconst ccos = new ComplexFunction('ccos', `\n\tvec2 iz = mul_i(z);\n\treturn 0.5 * (cexp(iz) + cexp(-iz));\n\t`);\nconst ctan = new ComplexFunction('ctan', 'return cdiv(csin(z), ccos(z));');\nconst csec = new ComplexFunction('csec', 'return reciprocal(ccos(z));');\nconst ccsc = new ComplexFunction('ccsc', 'return reciprocal(csin(z));');\nconst ccot = new ComplexFunction('ccot', 'return cdiv(ccos(z), csin(z));');\n\n// Inverse Trigonomeric Functions\nconst carcsin = new ComplexFunction('carcsin',\n\t'return -mul_i(clog(mul_i(z) + csqrt(ONE - csquare(z))));');\nconst carccos = new ComplexFunction('carccos',\n\t'return -mul_i(clog(z + csqrt(csquare(z) - ONE)));');\nconst carctan = new ComplexFunction('carctan',`\n\tvec2 iz = mul_i(z);\n\treturn 0.5 * mul_i(clog(ONE - iz) - clog(ONE + iz));\n\t`);\n\nconst carccot = new ComplexFunction('carccot', 'return carctan(reciprocal(z));');\nconst carcsec = new ComplexFunction('carcsec', 'return carccos(reciprocal(z));');\nconst carccsc = new ComplexFunction('carccsc', 'return carcsin(reciprocal(z));');\n\n\n// Hyperbolic Trigonometric Functions\nconst csinh = new ComplexFunction('csinh',\n\t'return 0.5 * (cexp(z) - cexp(-z));');\nconst ccosh = new ComplexFunction('ccosh',\n\t'return 0.5 * (cexp(z) + cexp(-z));');\nconst ctanh = new ComplexFunction('ctanh', `\n\tvec2 a = cexp(z);\n\tvec2 b = cexp(-z);\n\treturn cdiv(a - b, a + b);\n\t`);\nconst csech = new ComplexFunction('csech',\n\t'return reciprocal(ccosh(z));');\nconst ccsch = new ComplexFunction('ccsch',\n\t'return reciprocal(csinh(z));');\nconst ccoth = new ComplexFunction('ccoth', `\n\tvec2 a = cexp(z);\n\tvec2 b = cexp(-z);\n\treturn cdiv(a + b, a - b);\n\t`);\n\n// Inverse hyperbolic trigonometric functions\nconst carsinh = new ComplexFunction('carsinh',\n\t'return clog(z + csqrt(csquare(z) + ONE));');\nconst carcosh = new ComplexFunction('carcosh',\n\t'return clog(z + csqrt(csquare(z) - ONE));');\nconst cartanh = new ComplexFunction('cartanh',\n\t'return 0.5 * clog(cdiv(ONE + z, ONE - z));');\nconst carsech = new ComplexFunction('carsech',\n\t'return clog(cdiv(ONE + csqrt(ONE - csquare(z)), z));');\nconst carcsch = new ComplexFunction('carcsch',\n\t'return clog(cdiv(ONE + csqrt(ONE + csquare(z)), z));');\nconst carcoth = new ComplexFunction('carcoth',\n\t'return 0.5 * clog(cdiv(z + ONE, z - ONE));');\n\n\n// Infix Operators //\nconst cneg = new ComplexFunction('cneg', 'return -z;');\nconst cadd = new ComplexFunction('cadd', 'return z+w;', 2);\nconst csub = new ComplexFunction('csub', 'return z-w;', 2);\nconst cmul = new ComplexFunction('cmul', `\n\treturn vec2(z.x*w.x-z.y*w.y, z.x*w.y+z.y*w.x);\n\t`, 2);\nconst cdiv = new ComplexFunction('cdiv', `\n\tfloat magnitude = length(w);\n\treturn cmul(z, cconj(w)) / (magnitude*magnitude);\n\t`, 2);\nconst cpow = new ComplexFunction('cpow', 'return cexp(cmul(clog(z), w));', 2);\n\n// Lanczos approximation\nconst cgamma = new ComplexFunction('cgamma',\n\t'if (z.x < 0.5) {return cgamma_left(z);} else {return cgamma_right(z);}');\nconst cgamma_left = new ComplexFunction('cgamma_left',\n\t'return PI * reciprocal(cmul(csin(PI*z), cgamma_right(ONE-z)));');\nconst cgamma_right = new ComplexFunction('cgamma_right', `\n\tvec2 w = z - ONE;\n\tvec2 t = w + vec2(7.5, 0);\n\tvec2 x = vec2(0.99999999999980993, 0);\n\tx += 676.5203681218851 * reciprocal(w + vec2(1, 0));\n\tx -= 1259.1392167224028 * reciprocal(w + vec2(2, 0));\n\tx += 771.32342877765313 * reciprocal(w + vec2(3, 0));\n\tx -= 176.61502916214059 * reciprocal(w + vec2(4, 0));\n\tx += 12.507343278686905 * reciprocal(w + vec2(5, 0));\n\tx -= .13857109526572012 * reciprocal(w + vec2(6, 0));\n\tx += 9.9843695780195716e-6 * reciprocal(w + vec2(7, 0));\n\tx += 1.5056327351493116e-7 * reciprocal(w + vec2(8, 0));\n\treturn sqrt(TAU) * cmul(cpow(t, w + vec2(0.5, 0)), cmul(cexp(-t), x));\n\t`);\nconst cfact = new ComplexFunction('cfact', 'return cgamma(z + ONE);');\n\n// Dirichlet eta function\nconst ceta = new ComplexFunction('ceta',\n\t'if (z.x < 0.0) {return ceta_left(z);} else {return ceta_right(z);}');\nconst ceta_left = new ComplexFunction('ceta_left', `\n\tz = -z;\n\n\tvec2 component_a = cmul(z, csin(z * PI/2.0));\n\tvec2 component_b = cmul(cgamma(z), ceta_right(z + ONE));\n\tvec2 multiplier_a = cexp(-log(PI) * (z + ONE));\n\tvec2 multiplier_b = cdiv(ONE - cexp(-LN2 * (z + ONE)), ONE - cexp(-LN2 * z));\n\n\tvec2 component = cmul(component_a, component_b);\n\tvec2 multiplier = cmul(multiplier_a, multiplier_b);\n\n\treturn 2.0 * cmul(component, multiplier);\n\t`);\n\nconst ceta_right = new ComplexFunction('ceta_right', `\n\tvec2 result = vec2(1.000000000000000, 0.0);\n\tresult -= 1.00000000000000000000 * cexp(-0.69314718055994528623 * z);\n\tresult += 1.00000000000000000000 * cexp(-1.09861228866810978211 * z);\n\tresult -= 1.00000000000000000000 * cexp(-1.38629436111989057245 * z);\n\tresult += 0.99999999999999555911 * cexp(-1.60943791243410028180 * z);\n\tresult -= 0.99999999999979938270 * cexp(-1.79175946922805495731 * z);\n\tresult += 0.99999999999386091076 * cexp(-1.94591014905531323187 * z);\n\tresult -= 0.99999999986491050485 * cexp(-2.07944154167983574766 * z);\n\tresult += 0.99999999776946757457 * cexp(-2.19722457733621956422 * z);\n\tresult -= 0.99999997147371189055 * cexp(-2.30258509299404590109 * z);\n\tresult += 0.99999971045373836631 * cexp(-2.39789527279837066942 * z);\n\tresult -= 0.99999762229395061652 * cexp(-2.48490664978800035456 * z);\n\tresult += 0.99998395846577381452 * cexp(-2.56494935746153673861 * z);\n\tresult -= 0.99990996358087780305 * cexp(-2.63905732961525840707 * z);\n\tresult += 0.99957522481587246510 * cexp(-2.70805020110221006391 * z);\n\tresult -= 0.99830090896564482872 * cexp(-2.77258872223978114491 * z);\n\tresult += 0.99419535104495204703 * cexp(-2.83321334405621616526 * z);\n\tresult -= 0.98295446518722640050 * cexp(-2.89037175789616451738 * z);\n\tresult += 0.95672573151919981793 * cexp(-2.94443897916644026225 * z);\n\tresult -= 0.90449212250748245445 * cexp(-2.99573227355399085425 * z);\n\tresult += 0.81569498718756294764 * cexp(-3.04452243772342301398 * z);\n\tresult -= 0.68698555062628596790 * cexp(-3.09104245335831606667 * z);\n\tresult += 0.52834368695773525904 * cexp(-3.13549421592914967505 * z);\n\tresult -= 0.36280435095576935023 * cexp(-3.17805383034794575181 * z);\n\tresult += 0.21751716776255453079 * cexp(-3.21887582486820056360 * z);\n\tresult -= 0.11124997091266028426 * cexp(-3.25809653802148213586 * z);\n\tresult += 0.04729731398489586680 * cexp(-3.29583686600432912428 * z);\n\tresult -= 0.01619245778522847637 * cexp(-3.33220451017520380432 * z);\n\tresult += 0.00427566222821304867 * cexp(-3.36729582998647414271 * z);\n\tresult -= 0.00081524972526846008 * cexp(-3.40119738166215546116 * z);\n\tresult += 0.00009970680093076545 * cexp(-3.43398720448514627179 * z);\n\tresult -= 0.00000586510593565794 * cexp(-3.46573590279972654216 * z);\n\treturn result;\n\t`);\n\n// Riemann zeta function\nconst czeta = new ComplexFunction('czeta',\n\t'return cdiv(ceta(z), ONE - cexp(LN2 * (ONE - z)));');\n\n\nvar complex_functions = {\n\t'mul_i': mul_i,\n\t'reciprocal': reciprocal,\n\t'cgamma_left': cgamma_left,\n\t'cgamma_right': cgamma_right,\n\t'ceta_left': ceta_left,\n\t'ceta_right': ceta_right,\n\t'square': csquare,\n\n\t'conj': cconj,\n\t'abs': cabs,\n\t'arg': carg,\n\t'cis': ccis,\n\t'exp': cexp,\n\t'log': clog,\n\t'ln': clog,\n\t'sqrt': csqrt,\n\t'^': cpow,\n\t'sin': csin,  'cos': ccos,  'tan': ctan,\n\t'sec': csec,  'csc': ccsc,  'cot': ccot,\n\t'arcsin': carcsin,  'arccos': carccos,  'arctan': carctan,\n\t'arcsec': carcsec,  'arccsc': carccsc,  'arccot': carccot,\n\t'sinh': csinh, 'cosh': ccosh, 'tanh': ctanh,\n\t'sech': csech, 'csch': ccsch, 'coth': ccoth,\n\t'arsinh': carsinh, 'arcosh': carcosh, 'artanh': cartanh,\n\t'arsech': carsech, 'arcsch': carcsch, 'arcoth': carcoth,\n\t'$': cneg,\n\t'+': cadd,\n\t'-': csub,\n\t'*': cmul,\n\t'/': cdiv,\n\t'!': cfact,\n\t'gamma': cgamma,\n\t'eta': ceta,\n\t'zeta': czeta\n};\n\nfunction translateExpression(expression) {\n\tconst tokens = parseExpression(expression);\n\tconst stack = [];\n\n\t// Return null on parse error\n\tif (tokens === null || tokens.length === 0) {return null;}\n\n\n\t// Evaluate RPN\n\tfor (const token of tokens) {\n\t\tif (token.type === 'variable') {\n\t\t\tstack.push(token.text);\n\t\t} else if (token.type === 'number') {\n\t\t\tlet text = token.text\n\n\t\t\tif (text === 'i') {\n\t\t\t\tstack.push('vec2(0, 1)');\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet magnitude = parseFloat(text).toString();\n\t\t\tif (magnitude.indexOf('.') === -1) {\n\t\t\t\tmagnitude += '.0';\n\t\t\t}\n\n\t\t\tif (text.endsWith('i')) {\n\t\t\t\tstack.push(`vec2(0, ${magnitude})`);\n\t\t\t} else {\n\t\t\t\tstack.push(`vec2(${magnitude}, 0)`);\n\t\t\t}\n\t\t} else if (complex_functions.hasOwnProperty(token.text)) {\n\t\t\tlet f = complex_functions[token.text];\n\t\t\tlet arity = f.num_args;\n\t\t\tlet parameters = [];\n\t\t\tif (stack.length < arity) {\n\t\t\t\tconsole.log('Malformed expression!');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfor (let i = 0; i < arity; i++) {\n\t\t\t\tparameters.push(stack.pop());\n\t\t\t}\n\t\t\tparameters.reverse();\n\t\t\tstack.push(f.apply(...parameters));\n\t\t} else {\n\t\t\tconsole.log(`Unknown token ${token.text}!`);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tif (stack.length !== 1) {\n\t\tconsole.log('Malformed expression!');\n\t\treturn null;\n\t}\n\n\treturn stack[0];\n}\n\nconst declarations = new Set(Object.values(complex_functions).map(f => f.declaration))\nconst definitions = new Set(Object.values(complex_functions).map(f => f.code))\n\nconst declarationString = Array.from(declarations).join('\\n');\nconst definitionString = Array.from(definitions).join('\\n');\n\nconst functionDefinitions = `${declarationString}\\n\\n${definitionString}`;\n\nexport {complex_functions, translateExpression, functionDefinitions};\n","import {\n  functionDefinitions,\n  translateExpression\n} from './complex-functions.js';\n\nfunction loadShader(gl, type, source) {\n  // Create and compile shader\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n\n  // Test for successful compilation\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log('Shader failed to compile: '\n      + gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n    return null;\n  }\n\n  return shader;\n}\n\n\nfunction createShaderProgram(gl, expression, customShader, variableNames) {\n  const fragmentShaderSource = getFragmentShaderSource(\n    expression,\n    customShader, \n    gl.drawingBufferWidth, gl.drawingBufferHeight,\n    variableNames\n  );\n\n  if (fragmentShaderSource === null) {return null;}\n\n  // Load vertex and fragment shaders\n  const vertexShader = loadShader(gl,\n    gl.VERTEX_SHADER, vertexShaderSource);\n  const fragmentShader = loadShader(gl,\n    gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n  if (vertexShader === null | fragmentShader === null) {\n    return null;\n  }\n\n  // Create shader program\n  const shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  // Test for successful linkage\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    console.log('Shader program failed to initialize: '\n      + gl.getProgramInfoLog(shaderProgram));\n    return null;\n  }\n\n  return shaderProgram;\n}\n\nexport default createShaderProgram;\n\n\nconst vertexShaderSource = `\n  attribute vec2 a_position;\n\n  void main() {\n    gl_Position = vec4(a_position, 0, 1);\n  }\n`;\n\n\nfunction getFragmentShaderSource(expression, customShader, width, height, variableNames) {\n  const x_offset = (width/2).toFixed(2);\n  const y_offset = (height/2).toFixed(2);\n  const dpr = window.devicePixelRatio.toFixed(4);\n\n  const variableDeclarations = variableNames.map(\n    (name) => `uniform vec2 ${name};`\n  ).join('\\n');\n\n  let custom_code = '';\n  let glsl_expression = null;\n  if (customShader) {\n    custom_code = expression;\n    glsl_expression = 'mapping(z)';\n  } else {\n    glsl_expression = translateExpression(expression);\n  }\n  if (glsl_expression === null) {return null;}\n\n  console.log('Shader Code:', glsl_expression);\n\n  return `\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n\n  const float PI = 3.14159265358979323846;\n  const float TAU = 2.0*PI;\n  const float LN2 = 0.69314718055994531;\n\n  const float checkerboard_scale = 0.25;\n\n  const vec2 ONE = vec2(1, 0);\n  const vec2 I = vec2(0, 1);\n  const vec2 C_PI = vec2(PI, 0);\n  const vec2 C_TAU = vec2(TAU, 0);\n  const vec2 C_E = vec2(2.718281845904523, 0);\n  const vec2 C_PHI = vec2(1.61803398, 0);\n\n  ${variableDeclarations}\n\n  ${functionDefinitions}\n\n  vec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n  }\n\n  vec3 get_color(vec2 z) {\n    float magnitude = length(z);\n    float phase = atan(z.y, z.x);\n\n    float color_value;\n    float color_saturation = 1.0;\n    if (continuous_gradient.x > 0.5) {\n      float color_lightness = 0.5 + atan(0.5 * log(magnitude))/PI;\n      color_saturation = 1.0;\n\n      if (invert_gradient.x > 0.5) {\n\tcolor_lightness = 1.0 - color_lightness;\n      }\n\n      /* HSL to HSV conversion */\n      color_lightness *= 2.0;\n      color_saturation *= 1.0 - abs(color_lightness - 1.0);\n      color_value = (color_lightness + color_saturation) / 2.0;\n      color_saturation /= color_value;\n    } else {\n      color_value = 0.5 * exp2(fract(log2(magnitude)));\n\n      if (invert_gradient.x > 0.5) {\n\tcolor_value = 1.5 - color_value;\n      }\n    }\n\n    if (enable_checkerboard.x > 0.5) {\n      vec2 checkerboard_components = floor(2.0 * fract(z/checkerboard_scale));\n      float checkerboard = floor(2.0 * fract((checkerboard_components.x + checkerboard_components.y)/2.0));\n      color_value *= 0.8 + 0.2 * checkerboard;\n    }\n\n    vec3 hsv_color = vec3(phase/TAU, color_saturation, color_value);\n    return hsv2rgb(hsv_color);\n  }\n\n  ${custom_code}\n\n  void main() {\n    const vec2 screen_offset = vec2(${x_offset}, ${y_offset});\n    vec2 plot_center = vec2(center_x.x, center_y.x);\n\n    float scale = exp(log_scale.x) * ${dpr};\n    if (antialiasing.x > 0.5) {scale *= 2.0;}\n\n    vec2 z = (gl_FragCoord.xy - screen_offset) / scale + plot_center;\n    vec2 w = ${glsl_expression};\n\n    vec3 color = get_color(w);\n    gl_FragColor = vec4(color, 1.0);\n  }\n  `;\n}\n","import createShaderProgram from './shaders.js';\n\n\nfunction initBuffers(gl) {\n  const vertexBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\n  // Positions of vertices (two triangles)\n  const vertices = [\n    -1, -1,\n    1, -1,\n    -1, 1,\n\n    -1, 1,\n    1, -1,\n    1, 1\n  ]\n\n  // Initialize buffer with position data\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(vertices),\n    gl.STATIC_DRAW\n  );\n}\n\nfunction initializeScene(gl, expression, customShader, variableNames) {\n  const shaderProgram = createShaderProgram(\n    gl,\n    expression, customShader,\n    variableNames\n  );\n\n  if (shaderProgram === null) {\n    console.log(\n      `Expression ${expression} could not be compiled!`\n    );\n    return null;\n  }\n\n  // Initialize shader program\n  initBuffers(gl);\n  gl.useProgram(shaderProgram);\n\n  // Initialize vertex array\n  const positionLocation = gl.getAttribLocation(shaderProgram, 'a_position');\n  gl.enableVertexAttribArray(positionLocation);\n  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n  // Retrieve pointers to variables\n  const variableLocations = {};\n  for (const name of variableNames) {\n    variableLocations[name] = gl.getUniformLocation(shaderProgram, name);\n  }\n  return variableLocations;\n}\n\nfunction drawScene(gl, variables) {\n//  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n//  gl.clear(gl.COLOR_BUFFER_BIT);\n\n  // Set variable values\n  for (const [location, value] of Object.values(variables)) {\n    gl.uniform2f(location, value, 0);\n  }\n\n  // Draw scene\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n}\n\nexport {initializeScene, drawScene};\n","import React from 'react';\n\nimport {initializeScene, drawScene} from '../../gl-code/scene.js';\n\nimport './function-plot.css';\n\n\nclass FunctionPlot extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.gl = null;\n\n    this.variables = this.props.variables;\n    this.variableLocations = {};\n    this.initialized = false;\n\n    this.mouseDown = false;\n\n    this.canvasSize = [];\n    this.position = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.componentDidUpdate.bind(this));\n\n    this.initializeWebGL();\n    this.componentDidUpdate();\n  }\n\n  componentDidUpdate() {\n    this.initializePlot();\n    this.updatePlot();\n    this.props.onError(!this.initialized);\n  }\n\n  pixelToPlot(x, y) {\n    const scale = Math.exp(this.variables.log_scale);\n    const offset_x = this.variables.center_x;\n    const offset_y = this.variables.center_y;\n\n    const plot_x = (x - this.canvasSize[0]/2) / scale + offset_x;\n    const plot_y = (this.canvasSize[1]/2 - y) / scale + offset_y;\n    return [plot_x, plot_y];\n  }\n\n  plotToPixel(plot_x, plot_y) {\n    const scale = Math.exp(this.variables.log_scale);\n    const offset_x = this.variables.center_x;\n    const offset_y = this.variables.center_y;\n\n    const x = scale * (plot_x - offset_x) + this.canvasSize[0]/2;\n    const y = -scale * (plot_y - offset_y) - this.canvasSize[1]/2;\n    return[x, y];\n  }\n\n  getPosition(mouseEvent) {\n    const nativeEvent = mouseEvent.nativeEvent;\n    \n    if (nativeEvent.targetTouches !== undefined) {\n      const touches = nativeEvent.targetTouches;\n      if (touches.length === 1) {\n\treturn [touches[0].pageX, touches[0].pageY, 1];\n      } else {\n\tconst [x0, y0] = [touches[0].pageX, touches[0].pageY];\n\tconst [x1, y1] = [touches[1].pageX, touches[1].pageY];\n\n\tconst centerX = (x0 + x1) / 2;\n\tconst centerY = (y0 + y1) / 2;\n\tconst logDistance = Math.log(Math.hypot(x1-x0, y1-y0));\n\treturn [centerX, centerY, logDistance];\n      }\n    } else {\n      return [nativeEvent.pageX, nativeEvent.pageY, 1];\n    }\n  }\n\n  updatePosition(mouseEvent) {\n    this.position = this.getPosition(mouseEvent);\n  }\n\n  handleZoom(wheelEvent, deltaLogScale) {\n    // Recenter plot at scroll location\n    const [mouse_plotx, mouse_ploty] = this.pixelToPlot(this.position[0], this.position[1]);\n    this.variables.center_x = mouse_plotx;\n    this.variables.center_y = mouse_ploty;\n    \n    // Change scale\n    if (deltaLogScale === undefined) {\n      deltaLogScale = (wheelEvent.deltaY > 0) ? -0.05: 0.05;\n    }\n    this.variables.log_scale += deltaLogScale;\n\n    // Move center back onto mouse\n    const [new_mouse_plotx, new_mouse_ploty] = this.pixelToPlot(this.position[0], this.position[1]);\n    const [x_shift, y_shift] = [new_mouse_plotx - mouse_plotx, new_mouse_ploty - mouse_ploty];\n    this.variables.center_x -= x_shift;\n    this.variables.center_y -= y_shift;\n\n    this.updatePlot();\n  }\n\n  handleMouseDown(event) {\n    this.updatePosition(event);\n    this.mouseDown=true;\n  }\n\n  handleMouseUp(event) {\n    this.mouseDown=false;\n  }\n\n  handleMouseMove(event) {\n    // Handle dragging of plot\n    if (this.mouseDown) {\n      const [x, y, logDistance] = this.getPosition(event);\n\n      const deltaPosition = [\n\tx - this.position[0],\n\ty - this.position[1],\n\tlogDistance - this.position[2]\n      ];\n\n      const scale = Math.exp(this.variables.log_scale);\n      this.variables.center_x -= deltaPosition[0] / scale;\n      this.variables.center_y += deltaPosition[1] / scale;\n      this.handleZoom(null, deltaPosition[2]);\n      this.updatePlot();\n    }\n    this.updatePosition(event);\n  }\n\n  handleTouchStart(event) {\n    this.handleMouseDown(event);\n  }\n\n  handleTouchMove(event) {\n    this.handleMouseMove(event);\n  }\n\n  handleTouchEnd(event) {\n    this.handleMouseUp(event);\n  }\n\n  handleVariableUpdate(variables) {\n    for (const [name, value] of Object.entries(variables)) {\n      this.variables[name] = value;\n    }\n\n    this.updatePlot();\n  }\n  \n  initializeWebGL() {\n    const canvas = this.refs.canvas;\n    this.gl = canvas.getContext('webgl');\n\n    if (this.gl === null) {\n      console.log('Unable to initialize WebGL.');\n      return null;\n    }\n  }\n\n  initializePlot() {\n    const canvas = this.refs.canvas;\n    let dpr = window.devicePixelRatio;\n\n    // Antialiasing\n    if (this.props.variables.antialiasing > 0.5) {\n      dpr *= 2;\n    }\n\n    // Resize canvas and WebGL viewport\n    canvas.width = canvas.offsetWidth * dpr;\n    canvas.height = canvas.offsetHeight * dpr;\n\n    this.canvasSize = [canvas.offsetWidth, canvas.offsetHeight];\n    this.gl.viewport(0, 0, canvas.width, canvas.height);\n\n    // Initialize scene and obtain WebGL variable pointers\n    const variableLocations = initializeScene(\n      this.gl,\n      this.props.expression,\n      this.variables.custom_function > 0.5,\n      Object.keys(this.variables)\n    );\n\n    // Check if initialized\n    this.initialized = (variableLocations !== null);\n    if (this.initialized) {\n      this.variableLocations = variableLocations;\n    }\n  }\n\n  updatePlot() {\n    const variableAssignments = {};\n    for (const [name, value] of Object.entries(this.variables)) {\n      variableAssignments[name] = [this.variableLocations[name], value];\n    }\n    drawScene(this.gl, variableAssignments);\n  }\n\n  render() {\n    return (\n      <div id='function-plot'>\n\t<div id='fallback-text'>\n\t  Please enable WebGL to use the plotter.\n\t</div>\n\t<canvas\n\t  ref='canvas'\n\n\t  onMouseDown={(event) => this.handleMouseDown(event)}\n\t  onMouseMove={(event) => this.handleMouseMove(event)}\n\t  onMouseUp={(event) => this.handleMouseUp(event)}\n\n\t  onMouseEnter={(event) => this.handleMouseMove(event)}\n\t  onMouseLeave={(event) => this.handleMouseUp(event)}\n\n\t  onTouchStart={(event) => this.handleTouchStart(event)}\n\t  onTouchMove={(event) => this.handleTouchMove(event)}\n\t  onTouchEnd={(event) => this.handleTouchEnd(event)}\n\n\t  onWheel={(event) => this.handleZoom(event)}\n\t/>\n      </div>\n    );\n  }\n}\n\nexport default FunctionPlot;\n","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\n\nimport './side-panel.css';\n\n\nconst styles = theme => ({\n  toolbar: theme.mixins.toolbar\n});\n\nclass SidePanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n    this.state = {\n      width: null\n    }\n  }\n  \n  componentDidMount() {\n    this.updateWidth();\n    window.addEventListener('resize', this.updateWidth.bind(this));\n  }\n\n  updateWidth() {\n    this.setState({width: window.innerWidth});\n  }\n\n  render() {\n    if (this.state.width > this.props.transitionWidth) {\n      return (\n\t<Drawer\n\t  anchor={this.props.anchor}\n\t  open={this.props.open}\n\t  variant='persistent'\n\t  classes={{\n\t    paper: this.props.className\n\t  }}\n\t>\n\t  <div className={this.classes.toolbar}/>\n\t  <div className='drawer-content'>\n\t    {this.props.children}\n\t  </div>\n\t</Drawer>\n      );\n    } else {\n      return (\n\t<SwipeableDrawer\n\t  anchor={this.props.anchor}\n\t  open={this.props.open}\n\t  onOpen={this.props.onToggle}\n\t  onClose={this.props.onToggle}\n\t  classes={{\n\t    paper: this.props.className\n\t  }}\n\t  disableDiscovery\n\t  disableSwipeToOpen\n\t>\n\t  <div className='drawer-content'>\n\t    {this.props.children}\n\t  </div>\n\t</SwipeableDrawer>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles)(SidePanel);\n","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nimport Slider from '@material-ui/lab/Slider';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\n\n\nconst styles = theme => ({\n  variableSlider: {\n    paddingLeft: 0,\n    paddingRight: 0\n  }\n});\n\nclass VariableSlider extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n  }\n\n  render() {\n    return (\n      <ListItem>\n\t<div className='variable-slider'>\n\t  <Typography variant='body2'>\n\t    {this.props.name + ' = ' + this.props.value.toFixed(3)}\n\t  </Typography>\n\t  <Slider\n\t    ref='slider'\n\t    classes={{root: this.classes.variableSlider}}\n\t    min={0}\n\t    max={1}\n\t    value={this.props.value}\n\t    onChange={this.props.onChange}\n\t  />\n\t</div>\n\t<ListItemSecondaryAction>\n\t  <IconButton\n\t    onClick={this.props.onDelete}\n\t  >\n\t    <DeleteIcon/>\n\t  </IconButton>\n\t</ListItemSecondaryAction>\n      </ListItem>\n    );\n  }\n}\n\nexport default withStyles(styles)(VariableSlider);\n","import {complex_functions} from './complex-functions.js';\nimport {functions, constants} from './parse-expression.js';\n\n\nconst restrictedFunctions = [];\n\nrestrictedFunctions.push(...Object.keys(complex_functions));\nrestrictedFunctions.push(...Object.values(complex_functions).map(f => f.name));\nrestrictedFunctions.push(...functions);\nrestrictedFunctions.push(...constants);\nrestrictedFunctions.push('z', 'i');\n\n/* GLSL Keywords */\nrestrictedFunctions.push(\n  'attribute', 'const', 'uniform', 'varying',\n  'layout',\n  'centroid', 'flat', 'smooth', 'noperspective',\n  'break', 'continue', 'do', 'for', 'while', 'switch', 'case', 'default',\n  'if', 'else',\n  'in', 'out', 'inout',\n  'float', 'int', 'void', 'bool', 'true', 'false',\n  'invariant', 'discard', 'return',\n  'lowp', 'mediump', 'highp', 'precision',\n  'struct',\n  'common', 'partition', 'active',\n  'asm', 'class', 'union', 'enum', 'typedef', 'template',\n  'this', 'packed',\n  'goto', 'inline', 'noinline', 'volatile', 'public', 'static',\n  'extern', 'external', 'interface',\n  'long', 'short', 'double', 'half', 'fixed', 'unsigned', 'superp',\n  'input', 'output',\n  'filter',\n  'sizeof', 'cast',\n  'namespace', 'using'\n);\n\n/* GLSL Built-In Functions */\nrestrictedFunctions.push(\n  'radians', 'degrees',\n  'sin', 'cos', 'tan',\n  'asin', 'acos', 'atan',\n  'sinh', 'cosh', 'tanh',\n  'asinh', 'acosh', 'atanh',\n  'pow', 'exp', 'log', 'exp2', 'log2',\n  'sqrt', 'inversesqrt',\n  'abs', 'sign', 'floor', 'trunc', 'round',\n  'ceil', 'fract',\n  'mod', 'modf', 'min', 'max',\n  'clamp', 'mix', 'step', 'smoothstep',\n  'isnan', 'isinf',\n  'length', 'distance', 'dot',\n  'cross', 'normalize', 'ftransform',\n  'faceforward',\n  'reflect', 'refract',\n  'transpose', 'inverse',\n  'equal', 'any', 'all', 'not',\n  'texture'\n);\n\nconst functionList = new Set(restrictedFunctions);\nexport default functionList;\n","import React from 'react';\n\nimport functionList from '../../gl-code/function-list.js';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\n\nconst blacklist = functionList;\n\nclass VariableAdder extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      errorMessage: ''\n    };\n  }\n\n  setValue(value) {\n    this.setState({value: value, errorMessage: ''});\n  }\n\n  handleKeyPress(event) {\n    if (event.keyCode === 13) {\n      this.handleClick();\n    }\n  }\n\n  handleClick() {\n    const name = this.state.value.toLowerCase();\n    if (name === '') {\n      this.setState({errorMessage: 'Must be nonempty'});\n    } else if (name.match(/^[a-z]+$/) === null) {\n      this.setState({errorMessage: 'Letters only'});\n    } else if (blacklist.has(name)) {\n      this.setState({errorMessage: 'Restricted keyword'});\n    } else {\n      this.setValue('');\n      this.props.onClick(name);\n    }\n  }\n\n  render() {\n    return (\n      <ListItem>\n\t<TextField\n\t  placeholder='Name'\n\t  onChange={event => this.setValue(event.target.value)}\n\t  onKeyDown={(event) => this.handleKeyPress(event)}\n\t  error={this.state.errorMessage !== ''}\n\t  helperText={this.state.errorMessage}\n\t  value={this.state.value}\n\t/>\n\t<Button\n\t  onClick={() => this.handleClick()}\n\t>Add</Button>\n      </ListItem>\n    );\n  }\n}\n\nexport default VariableAdder;\n","function lowerParser(text) {\n\treturn text.toLowerCase();\n}\n\nfunction numberParser(text) {\n\tconst parsed = Number(text);\n\n\tif (!Number.isNaN(parsed)) {\n\t\treturn parsed;\n\t}\n}\n\nconst parsers = {\n\tnumber: numberParser,\n\tlower: lowerParser\n};\nexport default parsers;\n","import React, {PureComponent} from 'react';\nimport ContentEditable from 'react-contenteditable';\n\nimport DEFAULT_PARSERS from './parsers.js';\nimport './EditableValue.css';\n\n\nclass EditableValue extends PureComponent {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tfocused: false,\n\t\t\ttext: ''\n\t\t};\n\t\tthis.element = React.createRef();\n\t}\n\n\t/*** Value Parsing ***/\n\tgetParser() {\n\t\tif (this.props.parser in DEFAULT_PARSERS) {\n\t\t\treturn DEFAULT_PARSERS[this.props.parser];\n\t\t} else {\n\t\t\treturn this.props.parser;\n\t\t}\n\t}\n\n\tparsedValue() {\n\t\treturn this.getParser()(this.state.text);\n\t}\n\n\tvalid() {\n\t\treturn this.parsedValue() !== undefined;\n\t}\n\n\t// Resets this.state.text to match this.props.value\n\treset() {\n\t\tconst propText = this.props.value.toString();\n\t\tif (propText !== this.state.text) {\n\t\t\tthis.setState({text: this.props.value.toString()});\n\t\t}\n\t}\n\n\n\t/*** Event Handlers ***/\n\tcomponentDidMount() {\n\t\t// Exit on Enter keypress\n\t\tdocument.addEventListener('keydown', ((e) => {\n\t\t\tif (e.key === 'Enter' && this.state.focused) {\n\t\t\t\tthis.element.current.blur();\n\t\t\t}\n\t\t}).bind(this));\n\t}\n\n\thandleFocus(e) {\n\t\tthis.setState({focused: true});\n\t\tthis.reset();\n\t}\n\n\thandleChange(e) {\n\t\tthis.setState({text: e.target.value.toString()});\n\t}\n\n\thandleBlur(e) {\n\t\tthis.setState({focused: false});\n\n\t\tif (this.valid()) {\n\t\t\tthis.props.onChange(this.parsedValue());\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {if (!this.state.focused) {this.reset();}}\n\n\trender() {\n\t\tconst classes = ['editable-value', this.props.name];\n\n\t\tif (this.state.focused) {\n\t\t\tclasses.push('focus')\n\t\t\tif (!this.valid()) {\n\t\t\t\tclasses.push('invalid')\n\t\t\t};\n\t\t}\n\n\t\tconst classString = classes.join(' ');\n\t\tconst current = this.element.current;\n\t\tif (current !== null) {\n\t\t\tthis.element.current.setAttribute('class', classString);\n\t\t}\n\n\t\tconst displayText = this.state.focused ? this.state.text : this.props.value.toString();\n\n\t\tif (this.props.disabled) {\n\t\t\treturn (\n\t\t\t\t<span className={classString}>\n\t\t\t\t\t{displayText}\n\t\t\t\t</span>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<ContentEditable\n\t\t\t\t\thtml={displayText}\n\n\t\t\t\t\tonFocus={this.handleFocus.bind(this)}\n\t\t\t\t\tonChange={this.handleChange.bind(this)}\n\t\t\t\t\tonBlur={this.handleBlur.bind(this)}\n\n\t\t\t\t\tclassName={classString}\n\n\t\t\t\t\ttagName='span'\n\n\t\t\t\t\tinnerRef={this.element}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport default EditableValue;\n","import React, {PureComponent} from 'react';\n\n\nimport BaseSlider from '@material-ui/lab/Slider';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport EditableValue from '../editable-value/EditableValue.js';\n\nimport './Slider.css';\n\n\nclass Slider extends PureComponent {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {min: 0, max: 1};\n\t}\n\n\tsetMin(value) {\n\t\tthis.setState({min: value});\n\t\tthis.clampValue();\n\t}\n\n\tsetMax(value) {\n\t\tthis.setState({max: value});\n\t\tthis.clampValue();\n\t}\n\n\tsetValue(value) {\n\t\tthis.ensureConsistency();\n\t\tthis.props.onChange(value);\n\t}\n\n\t// Clamp this.props.value between min and max.\n\tclampValue() {\n\t\tconst [min, max, value] = [this.state.min, this.state.max, this.props.value];\n\t\tif (value < min) {this.props.onChange(min);}\n\t\tif (value > max) {this.props.onChange(max);}\n\t}\n\n\t// Adjust this.state.min and this.state.max\n\t// if this.props.value is out of bounds.\n\tensureConsistency() {\n\t\tconst [min, max, value] = [this.state.min, this.state.max, this.props.value];\n\t\tif (min > value) {this.setState({min: value});}\n\t\tif (max < value) {this.setState({max: value});}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.ensureConsistency();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.ensureConsistency();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className='slider-base'>\n\t\t\t\t<div className='slider'>\n\t\t\t\t\t\t<div className='info-row'>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\tvalue={this.props.name}\n\t\t\t\t\t\t\t\tparser='lower'\n\t\t\t\t\t\t\t\tonChange={this.props.onNameChange}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span>=</span>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='value'\n\t\t\t\t\t\t\t\tvalue={this.props.value}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setValue.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='main-row'>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='lower-bound'\n\t\t\t\t\t\t\t\tvalue={this.state.min}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setMin.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<BaseSlider\n\t\t\t\t\t\t\t\tclassName='main-slider'\n\t\t\t\t\t\t\t\tmin={this.state.min}\n\t\t\t\t\t\t\t\tmax={this.state.max}\n\t\t\t\t\t\t\t\tvalue={this.props.value}\n\t\t\t\t\t\t\t\tonChange={(e, v) => this.setValue(v)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<EditableValue\n\t\t\t\t\t\t\t\tname='upper-bound'\n\t\t\t\t\t\t\t\tvalue={this.state.max}\n\t\t\t\t\t\t\t\tparser='number'\n\t\t\t\t\t\t\t\tonChange={this.setMax.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<IconButton onClick={this.props.onDelete} className='delete-icon'>\n\t\t\t\t\t<DeleteIcon/>\n\t\t\t\t</IconButton>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Slider;\n","import React from 'react';\n\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\nimport VariableSlider from './VariableSlider.js';\nimport VariableAdder from './VariableAdder.js';\n\nimport Slider from './slider/Slider.js';\n\nimport './slider-panel.css';\n\n\nconst hiddenVariables = new Set([\n  'log_scale', 'center_x', 'center_y',\n  'enable_checkerboard',\n  'invert_gradient', 'continuous_gradient',\n  'antialiasing',\n  'custom_function'\n]);\n\nclass SliderPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.sliders = props.variables;\n    this.textField = React.createRef();\n  }\n\n  handleChange(name, value) {\n    this.sliders[name] = value;\n    this.props.onUpdate(this.sliders);\n    this.forceUpdate();\n  }\n\n  renderSliderList() {\n    let sliderList = [];\n    for (const [name, value] of Object.entries(this.sliders)) {\n      // Skip variables in hidden blacklist\n      if (hiddenVariables.has(name)) {continue;}\n\n      // Return slider component\n      sliderList.push(\n\t<Slider \n\t  key={name}\n\t  name={name}\n\t  value={value}\n\t  onChange={(value) => this.handleChange(name, value)}\n\t  onDelete={() => this.props.onRemove(name)}\n\t/>\n      );\n    }\n\n    return sliderList;\n  }\n\n  render() {\n    return (\n      <List id='variable-list'>\n\t<ListSubheader disableSticky>Variables</ListSubheader>\n\t{this.renderSliderList()}\n\t<VariableAdder\n\t  onClick={name => this.props.onAdd(name, 0.5)}\n\t/>\n      </List>\n    );\n  }\n}\n\nexport default SliderPanel;\n","import React from 'react';\n\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\nclass BooleanOption extends React.PureComponent {\n  render() {\n    return (\n      <ListItem\n\tbutton\n\tonClick={this.props.onClick}\n      >\n\t<Checkbox\n\t  checked={this.props.checked}\n\t/>\n\t<ListItemText>{this.props.label}</ListItemText>\n      </ListItem>\n    );\n  }\n}\n\nclass OptionsPanel extends React.PureComponent {\n  renderOptions() {\n    const options = [];\n    for (const [variable, label] of Object.entries(this.props.options)) {\n      options.push(\n\t<BooleanOption\n\t  key={variable}\n\t  onClick={() => this.props.onToggle(variable)}\n\t  checked={this.props.variables[variable] > 0.5}\n\t  label={label}\n\t/>\n      );\n    }\n    return options;\n  }\n\n  render() {\n    return (\n      <List id='options-panel'>\n\t<ListSubheader disableSticky>{this.props.heading}</ListSubheader>\n\t{this.renderOptions()}\n      </List>\n    );\n  }\n}\n\nexport default OptionsPanel;\n","import React from 'react';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\n\nimport './function-editor.css';\n\n\nclass FunctionEditor extends React.PureComponent {\n  handleChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  render() {\n    return (\n      <div id='function-editor'>\n\t<Typography variant='caption'>\n\t  Please read the “Advanced Features” documentation in the right pane before proceeding!\n\t</Typography>\n\t<TextField\n\t  fullWidth\n\t  multiline\n\t  placeholder='vec2 mapping(vec2 z)'\n\t  error={this.props.errorMessage}\n\t  onChange={(event) => this.handleChange(event)}\n\t  defaultValue={this.props.value}\n\t/>\n      </div>\n    );\n  }\n}\n\nexport default FunctionEditor;\n","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport Typography from '@material-ui/core/Typography';\nimport Chip from '@material-ui/core/Chip';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport {functions, constants} from '../../gl-code/parse-expression.js';\n\nimport './help-text.css';\n\n\nconst styles = theme => ({\n  buttonStyle: {\n    ...theme.typography.button\n  },\n  chip: {\n    margin: 3\n  }\n});\n\nconst supportedFunctions = [\n  {\n    name: 'Operators',\n    entries: ['+', '-', '*', '/', '^', '!']\n  },\n  {\n    name: 'Trigonometry',\n    entries: [\n      'sin', 'cos', 'tan', 'sec', 'csc', 'cot',\n      'arcsin', 'arccos', 'arctan', 'arcsec', 'arccsc', 'arccot',\n      'sinh', 'cosh', 'tanh', 'sech', 'csch', 'coth',\n      'arsinh', 'arcosh', 'artanh', 'arsech', 'arcsch', 'arcoth'\n    ]\n  },\n  {\n    name: 'Exponential',\n    entries: ['exp', 'log', 'ln']\n  },\n  {\n    name: 'Constants',\n    entries: Array.from(constants)\n  },\n  {\n    name: 'Miscellaneous',\n    entries: [\n      'sqrt',\n      'gamma', 'eta', 'zeta',\n      'abs', 'arg', 'conj', 'cis'\n    ]\n  }\n];\n\nclass HelpText extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n  }\n\n  renderChips(entries) {\n    return entries.map(label =>\n      <Chip \n\tkey={label}\n\tlabel={label}\n\tclassName={this.classes.chip}\n      />\n    );\n  }\n  \n  renderSupportedFunctions() {\n    const sections = []\n    for (const section of supportedFunctions) {\n      sections.push(\n\t<div key={section.name}>\n\t  <h3>{section.name}</h3>\n\t  {this.renderChips(section.entries)}\n\t</div>\n      );\n    }\n    return sections;\n  }\n\n  render() {\n    return (\n      <div id='help-text'>\n\t<h1>Complex Function Plotter</h1>\n\n\t<h2>Introduction</h2>\n\t<p>Creates interactive, domain-colored plots of complex functions.</p>\n\t<p>Each point on the complex plane is colored according to the value of the function at that point.\n\tHue and brightness are used to display phase and magnitude, respectively.</p>\n\t<p>To increase the displayable range of values, brightness cycles from dark to light repeatedly with magnitude, jumping at every power of two.\n\tThe “edges” of regions with different brightness correspond to curves along which the function has constant magnitude.\n\t</p>\n\t<p>This method allows for quick visualization of the locations and orders of any poles and zeros.\n\tFor more information, see the <a href='https://en.wikipedia.org/wiki/Domain_coloring'>Wikipedia article on domain coloring.</a></p>\n\n\t<h2>Controls</h2>\n\t<p>To plot a complex function, enter its expression in the top bar. Parentheses (curved or square), complex number literals, and arbitrary variables (see “Variables” below) are supported. Input is case-insensitive.</p>\n\t<p>A red underline will appear if the expression cannot be plotted. You might have made a syntax error or forgot to declare a variable.</p>\n\t<p>Drag the plot to pan, and use the scroll wheel to zoom in and out.</p>\n\n\t<h2>Supported Functions</h2>\n\t<div className='help-indent'>\n\t  {this.renderSupportedFunctions()}\n\t</div>\n\n\t<h2>Variables</h2>\n\t<p>Expressions can contain arbitrary user-defined variables.</p>\n\t<p>\n\tClick on the <MenuIcon style={{fontSize: 20}}/> icon in the upper-left corner to open the variables panel.\n\tVariables can be added with the <span className={this.classes.buttonStyle}>Add</span> button and removed with the <DeleteIcon style={{fontSize: 20}}/> button.</p>\n\n\t<p>\n\tClick on the variable’s current value or the slider’s upper & lower bounds to edit them.\n\t</p>\n\t\n\t<p>Any string of lowercase letters can be used as a variable name, except for reserved functions, the built-in variable <i>z</i>, and the constant <i>i</i>.</p>\n\n\t<h2>Options</h2>\n\t<p>The following options can be found below the variables panel:</p>\n\t\n\t<div className='help-indent'>\n\t  <h3>Enable Checkerboard</h3>\n\t  <p>Overlays a checkerboard with eight squares per unit length, colored according to the real and imaginary parts of the function’s value.</p>\n\n\t  <h3>Invert Gradient</h3>\n\t  <p>Reverses the direction of the magnitude gradient. When the gradient is inverted, the apparent height of the “layers” formed correlate with the magnitude of the function.</p>\n\n\t  <h3>Continuous Gradient</h3>\n\t  <p>Use a continuous magnitude gradient rather than the “stepped” default. Reduces the range of visually discernible magnitudes, but removes shading artifacts in certain situations.</p>\n\n\t  <h3>Enable Antialiasing</h3>\n\t  <p>Enables antialiasing for higher-quality output. May degrade performance. Enabling this option is not recommended on mobile devices.</p>\n\t</div>\n\n\t<h2>Tips</h2>\n\t<p>To share a graph, just copy and paste the URL! The address automatically changes to reflect the plotted expression.</p>\n\n\t<h2>Advanced Features</h2>\n\t<ExpansionPanel>\n\t  <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\n\t    <Typography variant='caption'>\n\t      Please read thoroughly iff you are using advanced options.\n\t    </Typography>\n\t  </ExpansionPanelSummary>\n\t  <ExpansionPanelDetails>\n\t    <div>\n\t      <h3>Custom Functions</h3>\n\t      <p>This option can be found under the “Advanced Options” heading in the left pane. Overrides the main expression bar, allowing you to code your own function.</p>\n\t      <p>Custom functions use the <a href='https://en.wikipedia.org/wiki/OpenGL_Shading_Language'>GLSL</a> programming language. If you've never worked with GLSL before, it's extremely similar to C. Here are a few tips and caveats:</p>\n\t      <ul>\n\t\t<li>Complex numbers are represented by the <tt>vec2</tt> type, which represents a 2D vector. The real part can be accessed through <tt>z.x</tt> and the imaginary part by <tt>z.y</tt>.</li>\n\t\t<li>Your custom function should be named <tt>mapping</tt>, and should take one input of type <tt>vec2</tt> and return an output of type <tt>vec2</tt>.</li>\n\t\t<li>Complex number literals <i>a+bi</i> should be entered as <tt>vec2(a, b)</tt>, even if they are real. GLSL doesn’t support addition or subtraction between the “complex” <tt>vec2</tt> type and floats. Scalar multiplication should work fine with floats, however. For convenience, there are constants <tt>ONE</tt> and <tt>I</tt> available.</li>\n\t\t<li>Addition and subtraction operators (<tt>+</tt> and <tt>-</tt>) work fine between <tt>vec2</tt> complex numbers. However, multiplication, division, and exponentiation operators act component-wise on the real and imaginary parts, which is probably not what you want. There are <tt>cmul</tt>, <tt>cdiv</tt>, and <tt>cpow</tt> functions available which will perform the proper complex operation.</li>\n\t\t<li>All supported functions are available, but with a <tt>c</tt> prefix. For example, the sin function is named <tt>csin</tt>. This is to avoid clashing with the built-in (real-valued) GLSL functions.</li>\n\t\t<li>Constants are available in uppercase with a <tt>C_</tt> prefix (e.g. <tt>C_PI</tt>), and are already in complex <tt>vec2</tt> form.</li>\n\t      </ul>\n\t      \n\t      <h3>Limitations</h3>\n\t      <p>There are currently a few limitations with the custom function feature which I hope to resolve soon:</p>\n\t      <ul>\n\t\t<li>URL-based sharing doesn’t currently work for custom functions. You may share the code directly instead.</li>\n\t\t<li>The editor will show a red underline if your code fails to compile, but currently does not show useful error information. For now, this information is visible in the developer console.</li>\n\t      </ul>\n\n\t      <h3>Tips</h3>\n\t      <p>Most desktop browsers will display a small resize handle at the bottom-right corner of the left pane. This can be very useful when working on complex code.</p>\n\t      <p>You can define arbitrary helper functions before your <tt>mapping</tt> function — you have the full power of GLSL!</p>\n\n\t      <p><b>You can use all your declared variables</b> directly in your code! They’ve already been converted into complex <tt>vec2</tt> form.</p>\n\t      \n\t      <h3>Obligatory Warning</h3>\n\t      <p>This is an advanced feature — you may break things! If anything freezes or crashes, a quick reload should resolve the issue (save your code first)!</p>\n\t    </div>\n\t  </ExpansionPanelDetails>\n\t</ExpansionPanel>\n\n\t<h2>Acknowledgements</h2>\n\t<p>Inspired by David Bau’s <a href='http://davidbau.com/conformal'>Conformal Map Plotter</a>.</p>\n\n\t<Typography variant='caption'>Complex Functions Plotter — Made with love by Samuel J. Li</Typography>\n\t<Typography variant='caption'>Found a bug? — samuel.wgx@gmail.com</Typography>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(HelpText);\n","import React from 'react';\nimport './App.css';\n\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport theme from './theme.js';\n\nimport ControlBar from './components/ControlBar/ControlBar.js';\nimport FunctionPlot from './components/FunctionPlot/FunctionPlot.js';\n\nimport SidePanel from './components/SidePanel/SidePanel.js';\n\nimport './components/control-panel.css';\nimport SliderPanel from './components/SliderPanel/SliderPanel.js';\nimport OptionsPanel from './components/OptionsPanel/OptionsPanel.js';\nimport FunctionEditor from './components/FunctionEditor/FunctionEditor.js';\n\nimport HelpText from './components/HelpText/HelpText.js';\n\n\nconst defaultShader = `vec2 mapping(vec2 z) {\n  vec2 c = z;\n  for (int i=0; i<32; i++) {\n    z = cmul(z, z) + c;\n  }\n  return z;\n}`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expression: 'z',\n      expressionError: false,\n\n      customShader: defaultShader,\n      shaderError: false,\n\n      menuOpen: false,\n      helpOpen: false,\n\n      variables: {\n\tlog_scale: 5,\n\tcenter_x: 0,\n\tcenter_y: 0,\n\tt: 0.3,\n\tenable_checkerboard: 1,\n\tinvert_gradient: 0,\n\tcontinuous_gradient: 0,\n\tantialiasing: 0,\n\tcustom_function: 0\n      }\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', this.handleHashChange.bind(this));\n\n    document.addEventListener(\n      'gesturestart',\n      (event) => this.preventDefault(event),\n      {passive: false}\n    );\n    document.addEventListener(\n      'touchmove',\n      (event) => this.preventDefault(event),\n      {passive: false}\n    );\n\n    this.handleHashChange();\n  }\n\n  preventDefault(event) {\n    const tagName = event.target.tagName.toLowerCase();\n    if (tagName === 'canvas') {\n      event.preventDefault();\n    } else {\n      return event;\n    }\n  }\n\n\n  // Toolbar buttons\n  handleMenuButton() {\n    this.setState({menuOpen: !this.state.menuOpen});\n  }\n\n  handleHelpButton() {\n    this.setState({helpOpen: !this.state.helpOpen});\n  }\n\n  // Variable Sliders\n  handleVariableUpdate(variables) {\n    this.state.variables = variables;\n    this.refs.plot.handleVariableUpdate(variables);\n  }\n\n  handleVariableAdd(name, value) {\n    const variables = this.state.variables;\n    variables[name] = value;\n    this.setState({variables: variables});\n  }\n\n  handleVariableRemove(name) {\n    const variables = this.state.variables;\n    delete variables[name];\n    this.setState({variables: variables});\n  }\n\n  handleOptionToggle(name) {\n    const variables = this.state.variables;\n    variables[name] = (variables[name] < 0.5) ? 1 : 0;\n    this.setState({variables: variables});\n  }\n\n  setErrorMessage(message) {\n    if (this.state.variables.custom_function > 0.5) {\n      if (message !== this.state.shaderError) {\n\tthis.setState({shaderError: message});\n      }\n    } else {\n      if (message !== this.state.expressionError) {\n\tthis.setState({expressionError: message});\n      }\n    }\n  }\n\n  handleHashChange(event) {\n    const hash = window.location.hash;\n    if (hash === '') {\n      return;\n    } else {\n      this.setExpression(decodeURIComponent(hash.slice(1)));\n    }\n  }\n\n  setExpression(text) {\n    text = text.toLowerCase();\n\n    window.history.replaceState(\n      undefined, undefined,\n      '#' + encodeURIComponent(text)\n    );\n    this.setState({expression: text});\n  }\n\n  setCustomShader(text) {\n    this.setState({customShader: text});\n  }\n\n  renderFunctionEditor() {\n    if (this.state.variables.custom_function > 0.5) {\n      return (\n\t<FunctionEditor\n\t  onChange={(text) => this.setCustomShader(text)}\n\t  errorMessage={this.state.shaderError}\n\t  value={this.state.customShader}\n\t/>\n      );\n    } else {\n      return; \n    }\n  }\n\n  render() {\n    const expression = (this.state.variables.custom_function > 0.5) ? this.state.customShader : this.state.expression;\n\n    return (\n      <MuiThemeProvider theme={theme}>\n\t<div id='app'>\n\t  <ControlBar\n\t    menuOpen={this.state.menuOpen}\n\t    helpOpen={this.state.helpOpen}\n\t    onMenuButton={() => this.handleMenuButton()}\n\t    onHelpButton={() => this.handleHelpButton()}\n\n\t    onChange={(text) => this.setExpression(text)}\n\t    value={this.state.expression}\n\t    error={this.state.expressionError}\n\t  />\n\t  <SidePanel\n\t    className='control-panel'\n\t    open={this.state.menuOpen} \n\t    onToggle={() => this.handleMenuButton()}\n\t    anchor='left'\n\t    transitionWidth={480}\n\t  >\n\t    <SliderPanel\n\t      variables={this.state.variables}\n\t      onUpdate={\n\t\t(variables) => this.handleVariableUpdate(variables)\n\t      }\n\t      onAdd={\n\t\t(name, value) => this.handleVariableAdd(name, value)\n\t      }\n\t      onRemove={\n\t\t(name) => this.handleVariableRemove(name)\n\t      }\n\t    />\n\t    <OptionsPanel\n\t      heading='Graphics Options'\n\t      options={{\n\t\tenable_checkerboard: 'Enable Checkerboard',\n\t\tinvert_gradient: 'Invert Gradient',\n\t\tcontinuous_gradient: 'Continuous Gradient',\n\t\tantialiasing: 'Enable Antialiasing'\n\t      }}\n\t      onToggle={(name) => this.handleOptionToggle(name)}\n\t      variables={this.state.variables}\n\t    />\n\t    <OptionsPanel\n\t      heading='Advanced Options'\n\t      options={{\n\t\tcustom_function: 'Custom Function'\n\t      }}\n\t      onToggle={(name) => this.handleOptionToggle(name)}\n\t      variables={this.state.variables}\n\t    />\n\t    {this.renderFunctionEditor()}\n\t  </SidePanel>\n\t  <FunctionPlot\n\t    ref='plot'\n\t    expression={expression}\n\t    variables={this.state.variables}\n\t    onError={(message) => this.setErrorMessage(message)}\n\t  />\n\t  <SidePanel\n\t    className='help-panel'\n\t    open={this.state.helpOpen}\n\t    anchor='right'\n\t    onToggle={() => this.handleHelpButton()}\n\t    transitionWidth={900}\n\t  >\n\t    <HelpText/>\n\t  </SidePanel>\n\t</div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'babel-polyfill';\n\nimport React from 'react';\nimport {render} from 'react-snapshot';\n\nimport './index.css';\n\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\n\nrender(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}